"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[8455,8655],{688:function(e,n,t){t.d(n,{f:function(){return v}});var r=t(89555),o=t(16934),s=t(68048),i=t(48443),a=t(36118),l=t(31014),d=t(20193),u=t(88464),c=t(88443),m=t(50111);var g={name:"ozd7xs",styles:"flex-shrink:0"},p={name:"1v0pok0",styles:"min-width:300px"},h={name:"11jf4ye",styles:"display:flex;gap:8px"},f={name:"bsla3r",styles:"max-height:300px;overflow:auto"};const v=({globalLineChartConfig:e,metricKeyList:n,updateUIState:t})=>{const{theme:v}=(0,o.u)(),y=(0,u.A)(),{lineSmoothness:M,selectedXAxisMetricKey:x,xAxisKey:Y}=e||{},_=(0,l.useCallback)((e=>t((n=>({...n,globalLineChartConfig:{...n.globalLineChartConfig,...e}})))),[t]),I=Y===a.fj.METRIC,b=y.formatMessage({id:"Kkr/RI",defaultMessage:"Configure charts"});return(0,m.FD)(s.DropdownMenu.Root,{modal:!1,children:[(0,m.Y)(i.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_44",content:b,children:(0,m.Y)(s.DropdownMenu.Trigger,{asChild:!0,children:(0,m.Y)(o.B,{componentId:"mlflow.charts.controls.global_chart_setup_dropdown",icon:(0,m.Y)(s.GearIcon,{}),"aria-label":b,css:g})})}),(0,m.FD)(s.DropdownMenu.Content,{align:"end",css:p,children:[(0,m.FD)(s.DropdownMenu.Group,{role:"region","aria-label":y.formatMessage({id:"Jp79WH",defaultMessage:"X-axis"}),children:[(0,m.Y)(s.DropdownMenu.Label,{css:h,children:(0,m.Y)(c.A,{id:"Jp79WH",defaultMessage:"X-axis"})}),(0,m.FD)(s.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_68",checked:Y===a.fj.STEP,onClick:()=>_({xAxisKey:a.fj.STEP}),children:[(0,m.Y)(s.DropdownMenu.ItemIndicator,{}),(0,m.Y)(c.A,{id:"53b+wP",defaultMessage:"Step"})]}),(0,m.FD)(s.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_78",checked:Y===a.fj.TIME,onClick:()=>_({xAxisKey:a.fj.TIME}),children:[(0,m.Y)(s.DropdownMenu.ItemIndicator,{}),(0,m.Y)(c.A,{id:"/QYbzP",defaultMessage:"Time (wall)"})]}),(0,m.FD)(s.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_88",checked:Y===a.fj.TIME_RELATIVE,onClick:()=>_({xAxisKey:a.fj.TIME_RELATIVE}),children:[(0,m.Y)(s.DropdownMenu.ItemIndicator,{}),(0,m.Y)(c.A,{id:"sIC5K3",defaultMessage:"Time (relative)"})]}),(0,m.FD)(s.DropdownMenu.Sub,{children:[(0,m.FD)(s.DropdownMenu.SubTrigger,{css:(0,r.AH)({paddingLeft:v.spacing.xs+v.spacing.sm},""),children:[(0,m.Y)(s.DropdownMenu.IconWrapper,{children:(0,m.Y)(i.C,{css:(0,r.AH)({visibility:I?"visible":"hidden"},"")})}),(0,m.Y)(c.A,{id:"yCncIr",defaultMessage:"Metric"})]}),(0,m.Y)(s.DropdownMenu.SubContent,{css:f,children:n.map((e=>(0,m.FD)(s.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_118",checked:x===e&&I,onClick:()=>_({xAxisKey:a.fj.METRIC,selectedXAxisMetricKey:e}),children:[(0,m.Y)(s.DropdownMenu.ItemIndicator,{}),e]},e)))})]})]}),(0,m.FD)(s.DropdownMenu.Group,{role:"region","aria-label":y.formatMessage({id:"qkRBUr",defaultMessage:"Line smoothing"}),children:[(0,m.Y)(s.DropdownMenu.Label,{children:(0,m.Y)(c.A,{id:"qkRBUr",defaultMessage:"Line smoothing"})}),(0,m.Y)("div",{css:(0,r.AH)({padding:v.spacing.sm},""),children:(0,m.Y)(d.o,{min:0,max:100,onChange:e=>_({lineSmoothness:e}),value:M||0})})]})]})]})}},4972:function(e,n,t){t.d(n,{$:function(){return o}});var r=t(31014);const o=()=>{const[e,n]=(0,r.useState)("visible"===document.visibilityState);return(0,r.useEffect)((()=>{document.addEventListener("visibilitychange",(e=>{n("visible"===document.visibilityState)}))}),[]),e}},16518:function(e,n,t){t.r(n),t.d(n,{RunPage:function(){return Dn},default:function(){return En}});var r=t(89555),o=t(68048),s=t(16934),i=t(10811),a=t(4877),l=t.n(a),d=t(31014),u=t(48588),c=t(48624),m=t(76010),g=t(25866),p=t(53677),h=t(5643),f=t(94026),v=t(50111);const y=({runTags:e,experimentId:n,runOutputs:t,artifactUri:o,runUuid:i})=>{const{theme:a}=(0,s.u)(),l=(0,f.Ub)(`(min-width: ${a.responsive.breakpoints.sm}px)`);return(0,v.Y)("div",{css:(0,r.AH)({flex:1,overflow:"hidden",display:"flex",paddingBottom:a.spacing.md,position:"relative"},""),children:(0,v.Y)(h.Ay,{runUuid:i,runTags:e,runOutputs:t,useAutoHeight:l,artifactRootUri:o,experimentId:n})})};var M=t(88443),x=t(79085),Y=t(58481);const _=()=>{const{"*":e}=(0,c.g)();return"model-metrics"===e?g.N3.MODEL_METRIC_CHARTS:"system-metrics"===e?g.N3.SYSTEM_METRIC_CHARTS:"evaluations"===e?g.N3.EVALUATIONS:"traces"===e?g.N3.TRACES:null!==e&&void 0!==e&&e.match(/^(artifactPath|artifacts)/)?g.N3.ARTIFACTS:g.N3.OVERVIEW},I=[g.N3.ARTIFACTS,g.N3.EVALUATIONS],b=()=>{const{experimentId:e,runUuid:n}=(0,c.g)(),t=(0,c.Zp)(),{theme:r}=(0,s.u)(),i=_(),[a,l]=(0,d.useState)(I.includes(i));return(0,v.FD)(o.LegacyTabs,{activeKey:i,onChange:r=>{e&&n&&i!==r&&(l(I.includes(r)),r!==g.N3.OVERVIEW?t(Y.Ay.getRunPageTabRoute(e,n,r)):t(Y.Ay.getRunPageRoute(e,n)))},tabBarStyle:{margin:a&&"0px"},children:[(0,v.Y)(o.LegacyTabs.TabPane,{tab:(0,v.Y)(M.A,{id:"kA+QJr",defaultMessage:"Overview"})},g.N3.OVERVIEW),(0,v.Y)(o.LegacyTabs.TabPane,{tab:(0,v.Y)(M.A,{id:"j25Ttg",defaultMessage:"Model metrics"})},g.N3.MODEL_METRIC_CHARTS),(0,v.Y)(o.LegacyTabs.TabPane,{tab:(0,v.Y)(M.A,{id:"hFlaPP",defaultMessage:"System metrics"})},g.N3.SYSTEM_METRIC_CHARTS),(0,v.Y)(o.LegacyTabs.TabPane,{tab:(0,v.Y)(M.A,{id:"s8a93+",defaultMessage:"Traces"})},g.N3.EVALUATIONS),(0,v.Y)(o.LegacyTabs.TabPane,{tab:(0,v.Y)(M.A,{id:"vPqFJE",defaultMessage:"Artifacts"})},g.N3.ARTIFACTS)]})};var A=t(9133),S=t(85466),w=t(81866),T=(t(69869),t(21317));var C={name:"s5xdrg",styles:"display:flex;align-items:center"},R={name:"2ecpu6",styles:"margin-left:8px;margin-right:4px"};function D({models:e,onRegisterClick:n,experimentId:t,runUuid:i}){const{theme:a}=(0,s.u)(),l=(e,l)=>(0,v.FD)(o.DropdownMenu.Group,{children:[(0,v.Y)(o.DropdownMenu.Label,{children:e}),l.map((e=>{const l=(0,A.first)(e.registeredModelVersionSummaries);if(!l)return(0,v.FD)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_50",onClick:()=>n(e),children:[(0,v.Y)("div",{css:(0,r.AH)({marginRight:a.spacing.md},""),children:(0,A.last)(e.path.split("/"))}),(0,v.Y)(o.DropdownMenu.HintColumn,{children:(0,v.Y)(c.N_,{target:"_blank",to:Y.Ay.getRunPageTabRoute(t,i,"artifacts/"+e.path),children:(0,v.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,v.Y)(s.av,{}),children:(0,v.Y)(M.A,{id:"NqEELO",defaultMessage:"View model"})})})})]},e.absolutePath);const{status:d,displayedName:u,version:m,link:g}=l;return(0,v.Y)(c.N_,{target:"_blank",to:g,children:(0,v.FD)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_80",children:[(0,v.Y)(o.DropdownMenu.IconWrapper,{css:C,children:"READY"===d?(0,v.Y)(T.h,{}):d?w.UA[d]:null}),(0,v.FD)("span",{css:(0,r.AH)({marginRight:a.spacing.md},""),children:[u,(0,v.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_90",css:R,children:["v",m]})]}),(0,v.Y)(o.DropdownMenu.HintColumn,{children:(0,v.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,v.Y)(s.av,{}),children:(0,v.Y)(M.A,{id:"T1sd79",defaultMessage:"Go to model"})})})]})},e.absolutePath)}))]}),d=e.filter((e=>e.registeredModelVersionSummaries.length>0)),u=e.filter((e=>!e.registeredModelVersionSummaries.length));return(0,v.FD)(v.FK,{children:[u.length?l("Unregistered models",u):null,u.length&&d.length?(0,v.Y)(o.DropdownMenu.Separator,{}):null,d.length?l("Registered models",d):null]})}const E=({runUuid:e,experimentId:n,runTags:t,artifactRootUri:i,registeredModelVersionSummaries:a})=>{const{theme:l}=(0,s.u)(),u=(0,d.useMemo)((()=>t?m.A.getLoggedModelsFromTags(t).map((({artifactPath:e})=>e)):[]),[t]),g=(0,d.useMemo)((()=>(0,A.orderBy)(u.map((e=>({path:e,absolutePath:`${i}/${e}`,registeredModelVersionSummaries:(null===a||void 0===a?void 0:a.filter((({source:n})=>n===`${i}/${e}`)))||[]}))),(e=>{var n;return parseInt((null===(n=e.registeredModelVersionSummaries[0])||void 0===n?void 0:n.version)||"0",10)}),"desc")),[u,a,i]),[p,h]=(0,d.useState)(null);if(g.length>1){const t=g.filter((e=>e.registeredModelVersionSummaries.length>0));return(0,v.FD)(v.FK,{children:[p&&(0,v.Y)(S.vR,{runUuid:e,modelPath:p.absolutePath,modelRelativePath:p.path,disabled:!1,showButton:!1,modalVisible:!0,onCloseModal:()=>h(null)}),(0,v.FD)(o.DropdownMenu.Root,{modal:!1,children:[(0,v.Y)(o.LegacyTooltip,{placement:"bottom",title:(0,v.Y)(M.A,{id:"qE/ZB7",defaultMessage:"{registeredCount}/{loggedCount} logged models are registered",values:{registeredCount:t.length,loggedCount:g.length}}),children:(0,v.Y)(o.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195",type:"primary",endIcon:(0,v.Y)(o.ChevronDownIcon,{}),children:(0,v.Y)(M.A,{id:"WGN2f3",defaultMessage:"Register model"})})})}),(0,v.Y)(o.DropdownMenu.Content,{align:"end",children:(0,v.Y)(D,{models:g,onRegisterClick:h,experimentId:n,runUuid:e})})]})]})}const f=(0,A.first)(g);if(!f)return null;const y=(0,A.first)(f.registeredModelVersionSummaries);return y?(0,v.Y)(c.N_,{to:y.link,target:"_blank",css:(0,r.AH)({marginLeft:l.spacing.sm},""),children:(0,v.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231",endIcon:(0,v.Y)(s.av,{}),type:"link",children:"Model registered"})}):(0,v.Y)(S.vR,{disabled:!1,runUuid:e,modelPath:f.absolutePath,modelRelativePath:f.path,showButton:!0,buttonType:"primary"})};var k=t(83667);var L={name:"ozd7xs",styles:"flex-shrink:0"};const F=({hasComparedExperimentsBefore:e,comparedExperimentIds:n=[],experiment:t,runDisplayName:r,runTags:o,runParams:s,runUuid:i,runOutputs:a,handleRenameRunClick:l,handleDeleteRunClick:u,artifactRootUri:m,registeredModelVersionSummaries:p,isLoading:h})=>{var f;const y=(0,d.useMemo)((()=>{var e,n;const r=(null===(e=t.tags)||void 0===e||null===(n=e.find((e=>e.key===k.kk)))||void 0===n?void 0:n.value)===g.Gk.GENAI_DEVELOPMENT,o=!(!a||!a.modelOutputs)&&a.modelOutputs.length>0;return r&&!o}),[t,a]),_=Y.Ay.getExperimentPageTabRoute(null!==(f=t.experimentId)&&void 0!==f?f:"",y?g.fM.EvaluationRuns:g.fM.Runs);const I=[e&&n?(0,v.Y)(c.N_,{to:Y.Ay.getCompareExperimentsPageRoute(n),children:(0,v.Y)(M.A,{id:"LLm5Bo",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:n.length}})}):(0,v.Y)(c.N_,{to:_,"data-testid":"experiment-runs-link",children:t.name})];t.experimentId&&I.push((0,v.Y)(c.N_,{to:_,"data-testid":"experiment-observatory-link-runs",children:y?(0,v.Y)(M.A,{id:"/T979r",defaultMessage:"Evaluations"}):(0,v.Y)(M.A,{id:"Rx8d9z",defaultMessage:"Runs"})}));return(0,v.FD)("div",{css:L,children:[(0,v.FD)(x.z,{title:(0,v.Y)("span",{"data-testid":"runs-header",children:r}),breadcrumbs:I,children:[(0,v.Y)(x.o,{menu:[{id:"overflow-rename-button",onClick:l,itemName:(0,v.Y)(M.A,{id:"fv7vQf",defaultMessage:"Rename"})},...u?[{id:"overflow-delete-button",onClick:u,itemName:(0,v.Y)(M.A,{id:"7WkP1e",defaultMessage:"Delete"})}]:[]]}),(()=>{var e;return(0,v.Y)(E,{runUuid:i,experimentId:null!==(e=null===t||void 0===t?void 0:t.experimentId)&&void 0!==e?e:"",runTags:o,artifactRootUri:m,registeredModelVersionSummaries:p})})()]}),(0,v.Y)(b,{})]})};var U=t(88464),N=t(48443),P=t(21616),B=t(76758);const V=({status:e})=>{const{theme:n}=(0,s.u)();return(0,v.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewstatusbox.tsx_81",css:(0,r.AH)({backgroundColor:"FINISHED"===e?n.isDarkMode?n.colors.green800:n.colors.green100:"KILLED"===e||"FAILED"===e?n.isDarkMode?n.colors.red800:n.colors.red100:"SCHEDULED"===e||"RUNNING"===e?n.isDarkMode?n.colors.blue800:n.colors.blue100:void 0},""),children:[e&&(0,v.Y)(B.F,{status:e})," ",(0,v.Y)(s.T.Text,{css:(0,r.AH)({marginLeft:n.spacing.sm},""),children:"FINISHED"===e?(0,v.Y)(s.T.Text,{color:"success",children:(0,v.Y)(M.A,{id:"ujm55z",defaultMessage:"Finished"})}):"KILLED"===e?(0,v.Y)(s.T.Text,{color:"error",children:(0,v.Y)(M.A,{id:"AupQl+",defaultMessage:"Killed"})}):"FAILED"===e?(0,v.Y)(s.T.Text,{color:"error",children:(0,v.Y)(M.A,{id:"AM8DuO",defaultMessage:"Failed"})}):"RUNNING"===e?(0,v.Y)(s.T.Text,{color:"info",children:(0,v.Y)(M.A,{id:"On3g1B",defaultMessage:"Running"})}):"SCHEDULED"===e?(0,v.Y)(s.T.Text,{color:"info",children:(0,v.Y)(M.A,{id:"X8OaXU",defaultMessage:"Scheduled"})}):e})]})},O=({runInfo:e,tags:n})=>{var t;const r=m.A.getUser(e,n);return(0,v.Y)(c.N_,{to:Y.Ay.searchRunsByUser(null!==(t=null===e||void 0===e?void 0:e.experimentId)&&void 0!==t?t:"",r),children:r})};var H=t(68109),z=t(39330),K=t(69526),$=t(32039),G=t(70618),j=t(9856),W=t(3288);const{systemMetricsLabel:q,modelMetricsLabel:Q}=(0,K.YK)({systemMetricsLabel:{id:"aFMLIO",defaultMessage:"System metrics"},modelMetricsLabel:{id:"NiSPrL",defaultMessage:"Model metrics"}}),X=e=>({key:n})=>n.toLowerCase().includes(e.toLowerCase()),J=({metricsList:e,runInfo:n,header:t,table:i})=>{var a,l;const{theme:d}=(0,s.u)(),[{column:u},...m]=i.getLeafHeaders(),p=null===(a=m.find((e=>"value"===e.id)))||void 0===a?void 0:a.column,h=e.some((({loggedModels:e})=>!(0,A.isEmpty)(e))),f=null===(l=m.find((e=>"models"===e.id)))||void 0===l?void 0:l.column;return e.length?(0,v.FD)(v.FK,{children:[t&&(0,v.Y)(o.TableRow,{children:(0,v.Y)(o.TableCell,{css:(0,r.AH)({flex:1,backgroundColor:d.colors.backgroundSecondary},""),children:(0,v.FD)(s.T.Text,{bold:!0,children:[t," (",e.length,")"]})})}),e.map((({key:e,value:t,loggedModels:s})=>{var i,a;return(0,v.FD)(o.TableRow,{children:[(0,v.Y)(o.TableCell,{style:{flex:u.getCanResize()?u.getSize()/100:void 0},children:(0,v.Y)(c.N_,{to:Y.Ay.getRunPageTabRoute(null!==(i=n.experimentId)&&void 0!==i?i:"",null!==(a=n.runUuid)&&void 0!==a?a:"",g.N3.MODEL_METRIC_CHARTS),children:e})}),(0,v.Y)(o.TableCell,{css:(0,r.AH)({flex:null!==p&&void 0!==p&&p.getCanResize()?p.getSize()/100:void 0},""),children:t.toString()}),h&&(0,v.Y)(o.TableCell,{css:(0,r.AH)({flex:null!==f&&void 0!==f&&f.getCanResize()?f.getSize()/100:void 0},""),children:(0,A.isEmpty)(s)?"-":(0,v.Y)(o.Overflow,{children:null===s||void 0===s?void 0:s.map((e=>{var n,t,r,o,s,i;return(0,v.Y)(c.N_,{target:"_blank",rel:"noopener noreferrer",to:Y.Ay.getExperimentLoggedModelDetailsPage(null!==(t=null===(r=e.info)||void 0===r?void 0:r.experiment_id)&&void 0!==t?t:"",null!==(o=null===(s=e.info)||void 0===s?void 0:s.model_id)&&void 0!==o?o:""),children:null===(i=e.info)||void 0===i?void 0:i.name},null===(n=e.info)||void 0===n?void 0:n.model_id)}))})})]},e)}))]}):null};var Z={name:"1gbhmpg",styles:"flex:0 0 auto;display:flex;flex-direction:column;overflow:hidden"},ee={name:"ozd7xs",styles:"flex-shrink:0"};const ne=({latestMetrics:e,runInfo:n,loggedModels:t})=>{const{theme:i}=(0,s.u)(),{detailsPageTableStyles:a,detailsPageNoEntriesStyles:l}=(0,W.z)(),u=(0,U.A)(),[c,m]=(0,d.useState)(""),g=(0,d.useMemo)((()=>{if(!t)return{};const e=(0,A.compact)((0,A.flatMap)(t,(e=>{var n,t;return null===(n=e.data)||void 0===n||null===(t=n.metrics)||void 0===t?void 0:t.map((({key:n})=>({key:n,model:e})))}))),n=(0,A.groupBy)(e,"key");return(0,A.mapValues)(n,(e=>e.map((({model:e})=>e))))}),[t]),p=(0,d.useMemo)((()=>{const n=(0,A.values)(e);return(0,A.isEmpty)(g)?n:n.map((e=>{var n;return{...e,loggedModels:null!==(n=g[e.key])&&void 0!==n?n:[]}}))}),[e,g]),h=p.some((({loggedModels:e})=>!(0,A.isEmpty)(e))),f=(0,d.useMemo)((()=>[{id:"models",header:u.formatMessage({id:"mRshzt",defaultMessage:"Models"}),accessorKey:"models",enableResizing:!0}]),[u]),y=(0,d.useMemo)((()=>{const e=[{id:"key",accessorKey:"key",header:()=>(0,v.Y)(M.A,{id:"pjlcSc",defaultMessage:"Metric"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,v.Y)(M.A,{id:"t0Qkuc",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!0}];return h&&e.push(...f),e}),[h,f]),x=(0,d.useMemo)((()=>{const e=p.filter((({key:e})=>(0,$.bw)(e))),n=p.filter((({key:e})=>!(0,$.bw)(e)));return e.length>0&&n.length>0?[{header:u.formatMessage(q),metrics:e.filter(X(c))},{header:u.formatMessage(Q),metrics:n.filter(X(c))}]:[{header:void 0,metrics:p.filter(X(c))}]}),[c,p,u]),Y=(0,G.N4)({data:p,getCoreRowModel:(0,j.HT)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:y});return(0,v.FD)("div",{css:Z,children:[(0,v.Y)(s.T.Title,{level:4,css:ee,children:(0,v.Y)(M.A,{id:"m4159e",defaultMessage:"Metrics ({length})",values:{length:p.filter(X(c)).length}})}),(0,v.Y)("div",{css:(0,r.AH)({padding:i.spacing.sm,border:`1px solid ${i.colors.borderDecorative}`,borderRadius:i.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:(()=>{if(!p.length)return(0,v.Y)("div",{css:l,children:(0,v.Y)(o.Empty,{description:(0,v.Y)(M.A,{id:"9vj5Ap",defaultMessage:"No metrics recorded"})})});const e=(0,A.sum)(x.map((({metrics:e})=>e.length)))<1;return(0,v.FD)(v.FK,{children:[(0,v.Y)("div",{css:(0,r.AH)({marginBottom:i.spacing.sm},""),children:(0,v.Y)(z.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_186",prefix:(0,v.Y)(z.S,{}),placeholder:u.formatMessage({id:"w2+rkp",defaultMessage:"Search metrics"}),value:c,onChange:e=>m(e.target.value),allowClear:!0})}),(0,v.FD)(o.Table,{scrollable:!0,empty:e?(0,v.Y)("div",{children:(0,v.Y)(o.Empty,{description:(0,v.Y)(M.A,{id:"lT1Joh",defaultMessage:"No metrics match the search filter"})})}):null,css:a,children:[(0,v.Y)(o.TableRow,{isHeader:!0,children:Y.getLeafHeaders().map((e=>(0,v.Y)(o.TableHeader,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_312",header:e,column:e.column,setColumnSizing:Y.setColumnSizing,isResizing:e.column.getIsResizing(),style:{flex:e.column.getCanResize()?e.column.getSize()/100:void 0},children:(0,G.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),x.map(((e,t)=>(0,v.Y)(J,{metricsList:e.metrics,runInfo:n,header:e.header,table:Y},e.header||t)))]})]})})()})]})};var te=t(38243),re=t(85343);var oe=t(26809),se=t(91144),ie=t(47545);const ae=({parentRunUuid:e})=>{const n=(0,i.wA)(),t=(0,i.d4)((({entities:n})=>n.runInfosByUuid[e])),r=(0,ie.t)({runUuid:e,disabled:!(0,se.wD)()}),s=(0,d.useMemo)((()=>{var e;return(0,se.wD)()?null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.info:t}),[r,t]);return(0,d.useEffect)((()=>{(0,se.wD)()||s||n((0,oe.aO)(e))}),[n,e,s]),s?s.experimentId&&s.runUuid?(0,v.Y)(c.N_,{to:Y.Ay.getRunPageRoute(s.experimentId,s.runUuid),children:s.runName}):null:(0,v.Y)(o.ParagraphSkeleton,{loading:!0,label:(0,v.Y)(M.A,{id:"nfIS4i",defaultMessage:"Parent run name loading"})})};var le=t(43683),de=t(38299),ue=t(98597),ce=t(98590);var me={name:"1wcfv52",styles:"margin-right:0"};const ge=({runUuid:e,tags:n,onTagsUpdated:t})=>{const a=(0,se.V0)(),[l,u]=(0,d.useState)(!1),{theme:c}=(0,s.u)(),m=(0,i.wA)(),g=(0,U.A)(),[p,h]=(0,d.useMemo)((()=>[(0,A.keys)(n).filter(ce.oD),(0,A.values)(n).filter((({key:e})=>(0,ce.oD)(e)))]),[n]),f=h.map((({key:e,value:n})=>({key:e,value:n}))),{TagAssignmentModal:y,showTagAssignmentModal:x}=(0,de.S)({componentIdPrefix:"mlflow.run-view-tags-box",initialTags:f,isLoading:l,onSubmit:(n,t)=>(u(!0),m((0,oe.cj)(e,n,t)).then((()=>{u(!1)}))),onSuccess:t}),{EditTagsModal:Y,showEditTagsModal:_,isLoading:I}=(0,le.Q)({valueRequired:!0,allAvailableTags:p,saveTagsHandler:async(n,r,o)=>m((0,oe.hD)(e,r,o)).then(t)}),b=()=>{a?x():_({tags:h})},S=g.formatMessage({id:"EwAZgg",defaultMessage:"Edit tags"});return(0,v.FD)("div",{css:(0,r.AH)({paddingTop:c.spacing.xs,paddingBottom:c.spacing.xs,display:"flex",flexWrap:"wrap",alignItems:"center","> *":{marginRight:"0 !important"},gap:c.spacing.xs},""),children:[f.length<1?(0,v.Y)(s.B,{componentId:"mlflow.run_details.overview.tags.add_button",size:"small",type:"tertiary",onClick:b,children:(0,v.Y)(M.A,{id:"dt3hj5",defaultMessage:"Add tags"})}):(0,v.FD)(v.FK,{children:[f.map((e=>(0,v.Y)(ue.t,{tag:e,enableFullViewModal:!0,css:me},`${e.key}-${e.value}`))),(0,v.Y)(N.T,{componentId:"mlflow.run_details.overview.tags.edit_button.tooltip",content:S,children:(0,v.Y)(s.B,{componentId:"mlflow.run_details.overview.tags.edit_button","aria-label":S,size:"small",icon:(0,v.Y)(o.PencilIcon,{}),onClick:b})})]}),I&&(0,v.Y)(s.S,{size:"small"}),Y,y]})};var pe=t(96034),he=t(56928);const fe=({runUuid:e,tags:n,onDescriptionChanged:t})=>{var a;const l=(null===(a=n[he.e])||void 0===a?void 0:a.value)||"",[u,c]=(0,d.useState)(!1),m=(0,U.A)(),{theme:g}=(0,s.u)(),p=(0,i.wA)(),h=!l;return(0,v.FD)("div",{css:(0,r.AH)({marginBottom:g.spacing.md},""),children:[(0,v.FD)(s.T.Title,{level:4,css:(0,r.AH)({display:"flex",alignItems:"center",gap:g.spacing.xs},""),children:[(0,v.Y)(M.A,{id:"ugwpKL",defaultMessage:"Description"}),(0,v.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46",size:"small",type:"tertiary","aria-label":m.formatMessage({id:"Mtj9Ay",defaultMessage:"Edit description"}),onClick:()=>c(!0),icon:(0,v.Y)(o.PencilIcon,{})})]}),h&&!u&&(0,v.Y)(s.T.Hint,{children:(0,v.Y)(M.A,{id:"VcNdOq",defaultMessage:"No description"})}),(!h||u)&&(0,v.Y)(pe.V,{defaultMarkdown:l,onSubmit:n=>p((0,oe.Jv)(e,he.e,n)).then(t).then((()=>c(!1))),onCancel:()=>c(!1),showEditor:u})]})};t(4874);var ve={name:"e0dnmk",styles:"cursor:pointer"};const ye=({registeredModelVersionSummaries:e})=>{const{theme:n}=(0,s.u)();return(0,v.Y)(o.Overflow,{children:null===e||void 0===e?void 0:e.map((e=>(0,v.FD)(c.N_,{to:e.link,css:(0,r.AH)({display:"flex",alignItems:"center",gap:n.spacing.sm},""),children:[(0,v.Y)(T.h,{})," ",e.displayedName," ",(0,v.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewregisteredmodelsbox.tsx_40",css:ve,children:["v",e.version]})]},e.displayedName)))})};var Me=t(41261),xe=t(82832);const Ye=async({queryKey:e})=>{const[,{runUuid:n}]=e;return xe.M.getPromptVersionsForRun(n)};var _e=t(84565);var Ie={name:"1bmnxg7",styles:"white-space:nowrap"};const be=({tags:e,runUuid:n})=>{const{theme:t}=(0,s.u)(),{data:i,error:a,isLoading:l}=(({runUuid:e},n={})=>{var t;const r=(0,Me.I)(["run_uuid",{runUuid:e}],{queryFn:Ye,retry:!1,...n});return{data:r.data,error:null!==(t=r.error)&&void 0!==t?t:void 0,isLoading:r.isLoading,refetch:r.refetch}})({runUuid:n}),d=[...(null===i||void 0===i?void 0:i.model_versions)||[],...(0,_e.U7)(e)];return l?(0,v.Y)(o.ParagraphSkeleton,{}):a||!d||0===d.length?(0,v.Y)(s.T.Hint,{css:(0,r.AH)({padding:`${t.spacing.xs}px 0px`},""),children:"\u2014"}):(0,v.Y)("div",{css:(0,r.AH)({display:"flex",flexDirection:"row",gap:t.spacing.sm,flexWrap:"wrap",padding:`${t.spacing.xs}px 0px`},""),children:d.map(((e,n)=>{const t=Y.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name)),r=`${e.name} (v${e.version})`;return(0,v.FD)(s.T.Text,{css:Ie,children:[(0,v.Y)(c.N_,{to:t,children:r}),n<d.length-1&&","]},r)}))})},Ae=({loggedModels:e,loggedModelsV3:n,runInfo:t})=>{const{theme:i}=(0,s.u)(),{experimentId:a,runUuid:l}=t,u=e=>(0,A.first)(e)||(0,v.Y)(M.A,{id:"0HbGko",defaultMessage:"Model"}),m=(0,d.useMemo)((()=>{const n=e.map((e=>u(e.flavors)));return new Set(n).size!==n.length}),[e]);return(0,v.FD)(o.Overflow,{children:[e.map(((e,n)=>(0,v.FD)(c.N_,{to:Y.Ay.getRunPageRoute(null!==a&&void 0!==a?a:"",null!==l&&void 0!==l?l:"",e.artifactPath),css:(0,r.AH)({display:"flex",alignItems:"center",gap:i.spacing.sm,cursor:"pointer",height:m&&n>0?i.general.heightBase:i.general.heightSm},""),children:[(0,v.Y)(o.ModelsIcon,{}),(0,v.FD)("div",{children:[u(e.flavors),m&&n>0&&(0,v.Y)(s.T.Hint,{children:e.artifactPath})]})]},e.artifactPath))),n.map(((e,n)=>{var t,s,l,d,u;return(0,v.FD)(c.N_,{to:Y.Ay.getExperimentLoggedModelDetailsPageRoute(null!==a&&void 0!==a?a:"",null!==(t=null===(s=e.info)||void 0===s?void 0:s.model_id)&&void 0!==t?t:""),css:(0,r.AH)({display:"flex",alignItems:"center",gap:i.spacing.sm,cursor:"pointer",height:m&&n>0?i.general.heightBase:i.general.heightSm},""),children:[(0,v.Y)(o.ModelsIcon,{}),(0,v.Y)("div",{children:null===(u=e.info)||void 0===u?void 0:u.name})]},null!==(l=null===(d=e.info)||void 0===d?void 0:d.model_id)&&void 0!==l?l:n)}))]})};var Se=t(56412),we=t(1323);var Te={name:"1wcfv52",styles:"margin-right:0"},Ce={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"},Re={name:"1a7v7i3",styles:"margin-right:0;&>div{padding-right:0;}"};const De=({runUuid:e,tags:n,search:t,className:i})=>{var a,l,d;const u=null===n||void 0===n||null===(a=n[g.xd])||void 0===a?void 0:a.value,c=null===n||void 0===n||null===(l=n[m.A.gitCommitTag])||void 0===l?void 0:l.value,p=m.A.renderSource(n,t,e,u),{theme:h}=(0,s.u)();return p?(0,v.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",gap:h.spacing.sm,paddingTop:h.spacing.sm,paddingBottom:h.spacing.sm,flexWrap:"wrap"},""),className:i,children:[(0,v.Y)(we.m,{sourceType:null===(d=n[m.A.sourceTypeTag])||void 0===d?void 0:d.value,css:(0,r.AH)({color:h.colors.actionPrimaryBackgroundDefault},"")}),p," ",u&&(0,v.Y)(o.LegacyTooltip,{title:u,children:(0,v.Y)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_48",css:Te,children:(0,v.FD)("div",{css:Ce,children:[(0,v.Y)(o.BranchIcon,{})," ",u]})})}),c&&(0,v.FD)(s.ax.Root,{componentId:"mlflow.run_details.overview.source.commit_hash_popover",children:[(0,v.Y)(s.ax.Trigger,{asChild:!0,children:(0,v.Y)(o.Tag,{componentId:"mlflow.run_details.overview.source.commit_hash",css:Re,children:(0,v.FD)("div",{css:(0,r.AH)({display:"flex",gap:h.spacing.xs,whiteSpace:"nowrap",alignContent:"center"},""),children:[(0,v.Y)(o.GitCommitIcon,{}),c.slice(0,7)]})})}),(0,v.FD)(s.ax.Content,{align:"start",children:[(0,v.Y)(s.ax.Arrow,{}),(0,v.FD)("div",{css:(0,r.AH)({display:"flex",gap:h.spacing.xs,alignItems:"center"},""),children:[c,(0,v.Y)(Se.i,{showLabel:!1,size:"small",type:"tertiary",copyText:c,icon:(0,v.Y)(o.CopyIcon,{})})]})]})]})]}):(0,v.Y)(s.T.Hint,{children:"\u2014"})};t(14830);var Ee=t(31179),ke=t(67212);var Le=t(38654),Fe=t(12017),Ue=t(36506),Ne=t(30706);const Pe=[Fe.I7.RelationshipType,Fe.I7.Step,Fe.I7.Name,Fe.I7.Status,Fe.I7.CreationTime,Fe.I7.RegisteredModels,Fe.I7.Dataset];var Be={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Ve={name:"g030ms",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center"},Oe={name:"ozd7xs",styles:"flex-shrink:0"};const He=({inputs:e,outputs:n,runInfo:t,loggedModelsV3:i,isLoadingLoggedModels:a=!1,loggedModelsError:l})=>{const{theme:u}=(0,s.u)(),{models:c}=((e,n,t,r)=>{const o=(0,d.useMemo)((()=>{var n;return(0,A.compact)((0,A.uniq)(null===e||void 0===e||null===(n=e.modelInputs)||void 0===n?void 0:n.map((e=>e.modelId)))).map((e=>{const n=null===r||void 0===r?void 0:r.find((n=>{var t;return(null===(t=n.info)||void 0===t?void 0:t.model_id)===e}));if(n)return{...n,direction:"input"}}))}),[null===e||void 0===e?void 0:e.modelInputs,r]),s=(0,d.useMemo)((()=>{var e;return(0,A.compact)((0,A.uniq)(null===n||void 0===n||null===(e=n.modelOutputs)||void 0===e?void 0:e.map((e=>e.modelId)))).map((e=>{var t,o;const s=null===r||void 0===r?void 0:r.find((n=>{var t;return(null===(t=n.info)||void 0===t?void 0:t.model_id)===e})),i=null===n||void 0===n||null===(t=n.modelOutputs)||void 0===t?void 0:t.find((({modelId:e})=>{var n;return e===(null===s||void 0===s||null===(n=s.info)||void 0===n?void 0:n.model_id)}));if(s)return{...s,direction:"output",step:null!==(o=null===i||void 0===i?void 0:i.step)&&void 0!==o?o:void 0}}))}),[null===n||void 0===n?void 0:n.modelOutputs,r]);return{models:(0,d.useMemo)((()=>{var e,n;return null!==(e=(0,A.uniqBy)((0,A.compact)([...o,...s]).map((n=null===t||void 0===t?void 0:t.runUuid,e=>{var t;return null!==(t=e.data)&&void 0!==t&&t.metrics?{...e,data:{...e.data,metrics:e.data.metrics.filter((e=>!n||e.run_id===n))}}:e})),(e=>{var n;return null===(n=e.info)||void 0===n?void 0:n.model_id})))&&void 0!==e?e:[]}),[o,s,t])}})(e,n,t,i),[m,g]=(0,d.useState)({}),{columnDefs:p}=(0,Fe.ih)({loggedModels:c,columnVisibility:m,disablePinnedColumns:!0,disableOrderBy:!0,supportedAttributeColumnKeys:Pe});return(0,v.FD)("div",{css:Be,children:[(0,v.FD)("div",{css:Ve,children:[(0,v.Y)(s.T.Title,{level:4,css:Oe,children:(0,v.Y)(M.A,{id:"km8vtM",defaultMessage:"Logged models ({length})",values:{length:c.length}})}),(0,v.Y)(Ne.$,{columnDefs:p,onUpdateColumns:g,columnVisibility:m,customTrigger:(0,v.Y)(s.B,{componentId:"mlflow.logged_model.list.columns",icon:(0,v.Y)(o.ColumnsIcon,{})})})]}),(0,v.Y)(N.S,{size:"sm",shrinks:!1}),(0,v.FD)("div",{css:(0,r.AH)({padding:u.spacing.sm,border:`1px solid ${u.colors.border}`,borderRadius:u.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:[l instanceof Error&&l.message&&(0,v.FD)(v.FK,{children:[(0,v.Y)(o.Alert,{type:"error",description:l.message,message:(0,v.Y)(M.A,{id:"2BzYqp",defaultMessage:"Error loading logged models"}),closable:!1,componentId:"mlflow.run_page.logged_model.list.error"}),(0,v.Y)(N.S,{size:"sm",shrinks:!1})]}),(0,v.Y)(Ue.Xs,{children:(0,v.Y)(Le._,{columnDefs:p,loggedModels:c,columnVisibility:m,isLoading:a,isLoadingMore:!1,moreResultsAvailable:!1,disableLoadMore:!0,css:ze(u),displayShowExampleButton:!1})})]})]})},ze=e=>({"&.ag-theme-balham":{"--ag-border-color":e.colors.border,"--ag-row-border-color":e.colors.border,"--ag-foreground-color":e.colors.textPrimary,"--ag-background-color":"transparent","--ag-odd-row-background-color":"transparent","--ag-row-hover-color":e.colors.actionDefaultBackgroundHover,"--ag-selected-row-background-color":e.colors.actionDefaultBackgroundPress,"--ag-header-foreground-color":e.colors.textPrimary,"--ag-header-background-color":e.colors.backgroundPrimary,"--ag-modal-overlay-background-color":e.colors.overlayOverlay,".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":e.colors.textPrimary},borderTop:0,fontSize:e.typography.fontSizeBase,".ag-center-cols-viewport":{...(0,s.E)(e,{orientation:"horizontal"})}}});var Ke=t(65287),$e=t(81313);var Ge={name:"ti75j2",styles:"margin:0"};const je=({tags:e,runInfo:n,datasets:t})=>{const[i,a]=(0,d.useState)(null),[l,u]=(0,d.useState)(!1),{theme:c}=(0,s.u)();if(!t||!t.length)return null;return(0,v.FD)(v.FK,{children:[(0,v.Y)(o.Overflow,{children:t.map((o=>(0,v.Y)(s.T.Link,{componentId:"mlflow.run_details.datasets_box.dataset_link",css:(0,r.AH)({textAlign:"left",".anticon":{fontSize:c.general.iconFontSize}},""),onClick:()=>(r=>{var o,s,i;a({datasetWithTags:r,runData:{experimentId:null!==(o=n.experimentId)&&void 0!==o?o:void 0,runUuid:null!==(s=n.runUuid)&&void 0!==s?s:"",runName:null!==(i=n.runName)&&void 0!==i?i:void 0,datasets:t,tags:e}}),u(!0)})(o),children:(0,v.Y)(te.E,{datasetWithTags:o,displayTextAsLink:!0,css:Ge})})))}),i&&(0,v.Y)(re.O,{isOpen:l,setIsOpen:u,selectedDatasetWithRun:i,setSelectedDatasetWithRun:a})]})};var We=function(e){return e.DETAILS="DETAILS",e.DATASETS="DATASETS",e.TAGS="TAGS",e.REGISTERED_MODELS="REGISTERED_MODELS",e}(We||{});var qe={name:"67z2yy",styles:"flex:1;align-self:flex-start"},Qe={name:"1ctdo4k",styles:"min-height:360px;max-height:760px;overflow:hidden;display:flex"};const Xe=({runUuid:e,onRunDataUpdated:n,tags:t,runInfo:o,datasets:i,params:a,latestMetrics:l,runInputs:u,runOutputs:p,registeredModelVersionSummaries:h,loggedModelsV3:f=[],isLoadingLoggedModels:y=!1,loggedModelsError:M,experimentKind:x})=>{const{theme:_}=(0,s.u)(),{search:I}=(0,c.zy)(),b=((0,U.A)(),(0,d.useMemo)((()=>m.A.getLoggedModelsFromTags(t)),[t])),S=(t[P.Ol],!(0,A.isEmpty)(null===u||void 0===u?void 0:u.modelInputs)||!(0,A.isEmpty)(null===p||void 0===p?void 0:p.modelOutputs)),w=!S,{modelVersions:T}=(g.Gk.GENAI_DEVELOPMENT,(null===b||void 0===b?void 0:b.length)>0||(null===f||void 0===f||f.length),(0,Ee.b)({loggedModels:f})),C=(0,A.uniqBy)([...h,...T],(e=>null===e||void 0===e?void 0:e.link)),R=(({runUuid:e,runInfo:n,tags:t,onTagsUpdated:o,datasets:i,shouldRenderLoggedModelsBox:a,loggedModelsV3:l,registeredModelVersionSummaries:u})=>{var g,p,h;const f=(0,U.A)(),{theme:y}=(0,s.u)(),{search:M}=(0,c.zy)(),x=(0,d.useMemo)((()=>m.A.getLoggedModelsFromTags(t)),[t]),_=t[P.Ol],I=n&&(0,v.FD)(v.FK,{children:[(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"PP5HZf",defaultMessage:"Created at"}),value:n.startTime?m.A.formatTimestamp(n.startTime,f):(0,v.Y)($e.bw,{})}),(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"7KKvmS",defaultMessage:"Created by"}),value:(0,v.Y)(O,{runInfo:n,tags:t})}),(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,v.Y)(ke.t,{value:null!==(g=null===n||void 0===n?void 0:n.experimentId)&&void 0!==g?g:"",element:null!==n&&void 0!==n&&n.experimentId?(0,v.Y)(c.N_,{to:Y.Ay.getExperimentPageRoute(n.experimentId),children:null===n||void 0===n?void 0:n.experimentId}):void 0})}),(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"vxY1CI",defaultMessage:"Status"}),value:(0,v.Y)(V,{status:n.status})}),(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,v.Y)(ke.t,{value:null!==(p=n.runUuid)&&void 0!==p?p:""})}),(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"ZoIjun",defaultMessage:"Duration"}),value:m.A.getDuration(n.startTime,n.endTime)}),_&&(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,v.Y)(ae,{parentRunUuid:_.value})}),(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"WmDiY9",defaultMessage:"Source"}),value:(0,v.Y)(De,{tags:t,search:M,runUuid:e,css:(0,r.AH)({paddingTop:y.spacing.xs,paddingBottom:y.spacing.xs},"")})}),a&&(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"mjNFJt",defaultMessage:"Logged models"}),value:(0,v.Y)(Ae,{runInfo:n,loggedModels:x,loggedModelsV3:l})}),(0,v.Y)($e.wB,{keyValue:f.formatMessage({id:"UCQwvo",defaultMessage:"Registered prompts"}),value:(0,v.Y)(be,{tags:t,runUuid:e})})]});return[{id:We.DETAILS,title:f.formatMessage({id:"QGiy9C",defaultMessage:"About this run"}),content:I},{id:We.DATASETS,title:f.formatMessage({id:"yrsFOP",defaultMessage:"Datasets"}),content:null!==i&&void 0!==i&&i.length?(0,v.Y)(je,{tags:t,runInfo:n,datasets:i}):(0,v.Y)($e.bw,{})},{id:We.TAGS,title:f.formatMessage({id:"arFT1W",defaultMessage:"Tags"}),content:(0,v.Y)(ge,{runUuid:null!==(h=n.runUuid)&&void 0!==h?h:"",tags:t,onTagsUpdated:o})},{id:We.REGISTERED_MODELS,title:f.formatMessage({id:"HnGOwk",defaultMessage:"Registered models"}),content:(null===u||void 0===u?void 0:u.length)>0?(0,v.Y)(ye,{registeredModelVersionSummaries:u}):(0,v.Y)($e.bw,{})}]})({runUuid:e,runInfo:o,tags:t,onTagsUpdated:n,datasets:i,loggedModelsV3:f,shouldRenderLoggedModelsBox:w,registeredModelVersionSummaries:C}),D=!0;return(0,v.FD)(Ke.a,{css:qe,usingSidebarLayout:D,secondarySections:R,children:[(0,v.Y)(fe,{runUuid:e,tags:t,onDescriptionChanged:n}),!1,(0,v.FD)("div",{css:[{flexDirection:"column"},{display:"flex",gap:_.spacing.lg,overflow:"hidden"},""],children:[(0,v.Y)(ne,{latestMetrics:l,runInfo:o,loggedModels:f}),(0,v.Y)(H.y,{params:a})]}),S&&(0,v.FD)(v.FK,{children:[!1,(0,v.Y)("div",{css:Qe,children:(0,v.Y)(He,{loggedModelsV3:f,isLoadingLoggedModels:y,inputs:u,outputs:p,runInfo:o,loggedModelsError:M})})]}),!1]})};var Je=t(23275),Ze=t(52350),en=t(82214);function nn({runId:e}){return(0,v.Y)(en.E,{statusCode:404,subMessage:`Run ID ${e} does not exist`,fallbackHomePageReactRoute:Y.Ay.rootRoute})}var tn=t(47664),rn=t(64558),on=t(87364),sn=t(33946),an=t(75627),ln=t(59397);const dn=({contextData:{metricsForRun:e},hoverData:n,chartData:{metricKey:t},isHovering:r,mode:o})=>{var i;const a=(0,an.bL)(n)?n.hoveredDataPoint:n,l=(0,U.A)();if(o===an.QS.MultipleTracesWithScanline&&(0,an.bL)(n)&&r)return(0,v.Y)(ln.G,{hoverData:n});if(null===a||void 0===a||!a.metricEntity)return null;const{timestamp:d,step:u,value:c}=a.metricEntity,g=(null===e||void 0===e||null===(i=e[t])||void 0===i?void 0:i.length)>1,p=(0,$.bw)(t),h=g&&p&&!(0,A.isUndefined)(d),f=g&&!p&&!(0,A.isUndefined)(u);return(0,v.FD)("div",{children:[f&&(0,v.FD)("div",{css:un.valueField,children:[(0,v.FD)("strong",{children:[(0,v.Y)(M.A,{id:"a02Pn6",defaultMessage:"Step"}),":"]})," ",u]}),h&&(0,v.FD)("div",{css:un.valueField,children:[(0,v.FD)("strong",{children:[(0,v.Y)(M.A,{id:"faLIN+",defaultMessage:"Timestamp"}),":"]})," ",m.A.formatTimestamp(d,l)]}),c&&(0,v.FD)("div",{children:[(0,v.Y)(s.T.Text,{bold:!0,children:t}),(0,v.Y)(N.S,{size:"xs"}),(0,v.Y)(s.T.Text,{children:c})]})]})},un={valueField:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}};var cn=t(30152),mn=t(36118),gn=t(39045),pn=t(19415),hn=t(62758),fn=t(32614),vn=t(63617),yn=t(4972),Mn=t(55999),xn=t(688),Yn=t(71932),_n=t(40029);var In={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},bn={name:"1tc6xju",styles:"flex:1;overflow:auto"};const An=({runInfo:e,metricKeys:n,mode:t,chartUIState:a,updateChartsUIState:l,latestMetrics:u={},params:c={},tags:m={}})=>{var p;const{theme:h}=(0,s.u)(),[f,y]=(0,d.useState)(""),{formatMessage:M}=(0,U.A)(),{compareRunCharts:x,compareRunSections:Y,chartsSearchFilter:_}=a,I=(0,d.useMemo)((()=>{var e;return null!==(e=null===x||void 0===x?void 0:x.filter((e=>!e.deleted)))&&void 0!==e?e:[]}),[x]),[b,S]=(0,d.useState)(void 0),w=(0,i.d4)((({entities:n})=>{var t;return(0,A.mapValues)(n.sampledMetricsByRunUuid[null!==(t=e.runUuid)&&void 0!==t?t:""],(e=>(0,A.compact)((0,A.values)(e).map((({metricsHistory:e})=>e)).flat())))})),T=(0,d.useMemo)((()=>({runInfo:e,metricsForRun:w})),[e,w]),{imagesByRunUuid:C}=(0,i.d4)((e=>({imagesByRunUuid:e.entities.imagesByRunUuid}))),[R,D]=(0,d.useState)(null),E=(0,hn.iO)(),k=(0,hn.cA)(),L=(0,hn.KP)(),F=(0,hn.Ez)(),N=(0,d.useMemo)((()=>{var n,t,r;return[{displayName:null!==(n=e.runName)&&void 0!==n?n:"",metrics:u,params:c,tags:m,images:C[null!==(t=e.runUuid)&&void 0!==t?t:""]||{},metricHistory:{},uuid:null!==(r=e.runUuid)&&void 0!==r?r:"",color:h.colors.primary,runInfo:e}]}),[e,u,c,m,C,h]);(0,d.useEffect)((()=>{if((!Y||!x)&&N.length>0){const{resultChartSet:e,resultSectionSet:n}=cn.i$.getBaseChartAndSectionConfigs({runsData:N,enabledSectionNames:["model"===t?g.NN:g.rx],filterMetricNames:e=>{const n=e.startsWith(g.qt);return"model"===t?!n:n}});l((t=>({...t,compareRunCharts:e,compareRunSections:n})))}}),[x,Y,N,t,l]),(0,d.useEffect)((()=>{l((e=>{if(!e.compareRunCharts||!e.compareRunSections)return e;const{resultChartSet:n,resultSectionSet:r,isResultUpdated:o}=cn.i$.updateChartAndSectionConfigs({compareRunCharts:e.compareRunCharts,compareRunSections:e.compareRunSections,runsData:N,isAccordionReordered:e.isAccordionReordered,filterMetricNames:e=>{const n=e.startsWith(g.qt);return"model"===t?!n:n}});return o?{...e,compareRunCharts:n,compareRunSections:r}:e}))}),[N,l,t]);const P=(0,yn.$)(),B=a.autoRefreshEnabled&&(0,se.vC)()&&P,V=Boolean(m[g.Cr]);return(0,Mn.L)({runUuids:[null!==(p=e.runUuid)&&void 0!==p?p:""],runUuidsIsActive:["RUNNING"===e.status],autoRefreshEnabled:B,enabled:V}),(0,v.FD)("div",{css:In,children:[(0,v.FD)("div",{css:(0,r.AH)({paddingBottom:h.spacing.md,display:"flex",gap:h.spacing.sm,flex:"0 0 auto"},""),children:[(0,v.Y)(_n.I,{chartsSearchFilter:_}),(0,se.vC)()&&(0,v.Y)(o.ToggleButton,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_244",pressed:a.autoRefreshEnabled,onPressedChange:e=>{l((n=>({...n,autoRefreshEnabled:e})))},children:M({id:"zC/uKl",defaultMessage:"Auto-refresh"})}),(0,v.Y)(xn.f,{metricKeyList:n,globalLineChartConfig:a.globalLineChartConfig,updateUIState:l})]}),(0,v.Y)("div",{css:bn,children:(0,v.Y)(an.W,{contextData:T,component:dn,children:(0,v.Y)(Yn.c_,{visibleChartCards:I,children:(0,v.Y)(gn.J,{compareRunSections:Y,compareRunCharts:I,reorderCharts:E,insertCharts:k,chartData:N,startEditChart:e=>D(e),removeChart:L,addNewChartCard:e=>n=>D(cn.i$.getEmptyChartCardByType(n,!1,void 0,e)),search:null!==_&&void 0!==_?_:"",supportedChartTypes:[cn.zL.LINE,cn.zL.BAR,cn.zL.IMAGE],setFullScreenChart:S,autoRefreshEnabled:B,globalLineChartConfig:a.globalLineChartConfig,groupBy:null})})})}),R&&(0,v.Y)(pn.z,{chartRunData:N,metricKeyList:n,paramKeyList:[],config:R,onSubmit:e=>{F(e),D(null)},onCancel:()=>D(null),groupBy:null,supportedChartTypes:[cn.zL.LINE,cn.zL.BAR,cn.zL.IMAGE],globalLineChartConfig:a.globalLineChartConfig}),(0,v.Y)(vn._,{fullScreenChart:b,onCancel:()=>S(void 0),chartData:N,tooltipContextValue:T,tooltipComponent:dn,autoRefreshEnabled:B,groupBy:null})]})},Sn=e=>{const n=`${e.runInfo.runUuid}-${e.mode}`,t=(0,d.useMemo)((()=>fn.A.getStoreForComponent("RunPage",n)),[n]),[r,o]=(0,d.useState)((()=>{const e={isAccordionReordered:!1,compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:(0,se.vC)(),globalLineChartConfig:{xAxisKey:mn.fj.STEP,lineSmoothness:0,selectedXAxisMetricKey:""}};try{const n=t.getItem("chartUIState");return n?JSON.parse(n):e}catch{return e}}));return(0,d.useEffect)((()=>{t.setItem("chartUIState",JSON.stringify(r))}),[r,t]),(0,v.Y)(hn.oB,{updateChartsUIState:o,children:(0,v.Y)(An,{...e,chartUIState:r,updateChartsUIState:o})})};var wn=t(26626),Tn=t(40784);var Cn=t(72661);const Rn=()=>(0,v.FD)(u.L,{children:[(0,v.Y)(o.TitleSkeleton,{loading:!0,label:(0,v.Y)(M.A,{id:"ea5zBl",defaultMessage:"Run page loading"})}),[...Array(3).keys()].map((e=>(0,v.Y)(o.ParagraphSkeleton,{seed:`s-${e}`},e)))]}),Dn=()=>{var e,n;const{runUuid:t,experimentId:a}=(0,c.g)(),h=(0,c.Zp)(),{theme:x}=(0,s.u)(),[I,b]=(0,d.useState)(!1),[S,w]=(0,d.useState)(!1);l()(t,"[RunPage] Run UUID route param not provided"),l()(a,"[RunPage] Experiment ID route param not provided");const T=t,C=a,{experiment:R,error:D,latestMetrics:E,loading:L,params:U,refetchRun:N,runInfo:P,tags:B,experimentFetchError:V,runFetchError:O,apiError:H,datasets:z,runInputs:K,runOutputs:G,registeredModelVersionSummaries:j}=(0,Je.g)({experimentId:C,runUuid:T}),W=Boolean(P),[q,Q]=(0,d.useMemo)((()=>E?[Object.keys(E).filter((e=>!(0,$.bw)(e))),Object.keys(E).filter((e=>(0,$.bw)(e)))]:[[],[]]),[E]),{comparedExperimentIds:X=[],hasComparedExperimentsBefore:J=!1}=(0,i.d4)((e=>e.comparedExperiments||{})),Z=_(),ee=(0,se.ht)(),ne=((e,n,t,r,o=!0)=>{const s=(0,d.useMemo)((()=>{var e,n;const o=[...null!==(e=null===t||void 0===t?void 0:t.modelInputs)&&void 0!==e?e:[],...null!==(n=null===r||void 0===r?void 0:r.modelOutputs)&&void 0!==n?n:[]],s=(0,A.uniq)((0,A.compact)(o.map((({modelId:e})=>e))));if(!(0,A.isEmpty)(s))return`attributes.model_id IN (${s.map((e=>`'${e}'`)).join(",")})`}),[t,r]),i=o&&Boolean(s),{data:a,isLoading:l,error:u}=(0,Tn.e)({experimentIds:[e],searchQuery:s},{enabled:i});return{models:i?a:void 0,isLoading:i&&l,error:u}})(C,0,K,G,!ee),te=(({runInputs:e,runOutputs:n,enabled:t=!0})=>{const r=(0,d.useMemo)((()=>{var t,r;const o=[...null!==(t=null===e||void 0===e?void 0:e.modelInputs)&&void 0!==t?t:[],...null!==(r=null===n||void 0===n?void 0:n.modelOutputs)&&void 0!==r?r:[]],s=(0,A.uniq)((0,A.compact)(o.map((({modelId:e})=>e))));if(!(0,A.isEmpty)(s))return s}),[e,n]),o=t&&!(0,A.isEmpty)(r),{data:s,isLoading:i,error:a}=(0,Cn.o)({modelIds:r},{enabled:o});return{models:s,isLoading:o&&i,error:a}})({runInputs:K,runOutputs:G,enabled:ee}),{error:re,isLoading:oe,models:ie}=ee?te:ne,ae=(0,f.Ub)(`(min-width: ${x.responsive.breakpoints.sm}px)`),le=L&&(!P||!R);return O instanceof Ze.s&&O.getErrorCode()===tn.tG.RESOURCE_DOES_NOT_EXIST||(null===H||void 0===H?void 0:H.code)===tn.tG.RESOURCE_DOES_NOT_EXIST||D&&(0,wn.b)(D).match(/not found$/)?(0,v.Y)(nn,{runId:T}):V instanceof Ze.s&&V.getErrorCode()===tn.tG.RESOURCE_DOES_NOT_EXIST?(0,v.Y)(rn.A,{}):O||V?null:(0,se.wD)()&&(D||H)&&!W?(0,v.Y)("div",{css:(0,r.AH)({marginTop:x.spacing.lg},""),children:(0,v.Y)(o.Empty,{title:(0,v.Y)(M.A,{id:"XaC3qF",defaultMessage:"Can't load run details"}),description:(0,wn.b)(null!==H&&void 0!==H?H:D),image:(0,v.Y)(s.l,{})})}):!le&&P&&R?(0,v.FD)(v.FK,{children:[(0,v.FD)(u.L,{usesFullHeight:ae,children:[(0,v.Y)(F,{comparedExperimentIds:X,experiment:R,handleRenameRunClick:()=>b(!0),handleDeleteRunClick:()=>w(!0),hasComparedExperimentsBefore:J,runDisplayName:m.A.getRunDisplayName(P,T),runTags:B,runParams:U,runUuid:T,runOutputs:G,artifactRootUri:null!==(e=null===P||void 0===P?void 0:P.artifactUri)&&void 0!==e?e:void 0,registeredModelVersionSummaries:j,isLoading:L||oe}),(0,v.Y)("div",{css:(0,r.AH)({flex:1,overflow:"auto",marginBottom:x.spacing.sm,display:"flex"},""),children:(()=>{var e;if(!P)return null;const n=()=>(0,v.Y)(on.r,{runUuid:T,runTags:B,experimentId:C,runDisplayName:m.A.getRunDisplayName(P,T)});switch(Z){case g.N3.MODEL_METRIC_CHARTS:return(0,v.Y)(Sn,{mode:"model",metricKeys:q,runInfo:P,latestMetrics:E,tags:B,params:U},"model");case g.N3.SYSTEM_METRIC_CHARTS:return(0,v.Y)(Sn,{mode:"system",metricKeys:Q,runInfo:P,latestMetrics:E,tags:B,params:U},"system");case g.N3.EVALUATIONS:return n();case g.N3.ARTIFACTS:return(0,v.Y)(y,{runUuid:T,runTags:B,runOutputs:G,experimentId:C,artifactUri:null!==(e=P.artifactUri)&&void 0!==e?e:void 0});case g.N3.TRACES:return n()}return(0,v.Y)(Xe,{runInfo:P,tags:B,params:U,latestMetrics:E,runUuid:T,onRunDataUpdated:N,runInputs:K,runOutputs:G,datasets:z,registeredModelVersionSummaries:j,loggedModelsV3:ie,isLoadingLoggedModels:oe,loggedModelsError:null!==re&&void 0!==re?re:void 0,experimentKind:(0,k.BH)(null===R||void 0===R?void 0:R.tags)})})()})]}),(0,v.Y)(p.j,{runUuid:T,onClose:()=>b(!1),runName:null!==(n=P.runName)&&void 0!==n?n:"",isOpen:I,onSuccess:N}),(0,v.Y)(sn.A,{selectedRunIds:[T],onClose:()=>w(!1),isOpen:S,onSuccess:()=>{h(Y.Ay.getExperimentPageRoute(C))}})]}):(0,v.Y)(Rn,{})};var En=Dn},26626:function(e,n,t){t.d(n,{b:function(){return o}});var r=t(74823);const o=e=>{if(e)return e instanceof r.K4&&e.graphQLErrors.length>0?e.graphQLErrors.map((e=>e.message||e.toString())).join(", "):"message"in e?e.message:e.toString()}},33946:function(e,n,t){var r=t(31014),o=t(97026),s=t(26809),i=t(10811),a=t(76010),l=t(64912),d=t(50111);class u extends r.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(){const e=[];return this.props.selectedRunIds.forEach((n=>{e.push(this.props.deleteRunApi(n))})),Promise.all(e).catch((()=>{const e=`${this.props.intl.formatMessage({id:"tdmVWN",defaultMessage:"While deleting an experiment run, an error occurred."})}`;this.props.openErrorModal(e)})).then((()=>{var e,n;null===(e=(n=this.props).onSuccess)||void 0===e||e.call(n)}))}render(){const e=this.props.selectedRunIds.length;return(0,d.Y)(o.u,{isOpen:this.props.isOpen,onClose:this.props.onClose,handleSubmit:this.handleSubmit,title:`Delete Experiment ${a.A.pluralize("Run",e)}`,helpText:(0,d.FD)("div",{children:[(0,d.Y)("p",{children:(0,d.FD)("b",{children:[e," experiment ",a.A.pluralize("run",e)," will be deleted."]})}),""]}),confirmButtonText:"Delete"})}}const c={deleteRunApi:s.IX,openErrorModal:s.Yi};n.A=(0,i.Ng)(null,c)((0,l.Ay)(u))},38299:function(e,n,t){t.d(n,{S:function(){return U}});var r=t(89555),o=t(31014),s=t(13369),i=t(16934),a=t(48443),l=t(68048),d=t(88443),u=t(4877),c=t.n(u),m=t(50111);function g({children:e}){const{theme:n}=(0,i.u)();return(0,m.Y)("div",{css:(0,r.AH)({display:"flex",flexDirection:"column",gap:n.spacing.sm},""),children:e})}const p=(0,o.createContext)(null);function h({children:e,...n}){return(0,m.Y)(p.Provider,{value:n,children:e})}function f(){const e=(0,o.useContext)(p);return c()(e,"useTagAssignmentContext must be used within a TagAssignmentRoot"),e}function v({children:e,...n}){const t=(0,s.xW)(),r=(0,m.Y)(h,{...n,children:(0,m.Y)(g,{children:e})});return t?r:(c()(n.form,"Nest your component on a FormProvider or pass a form prop"),(0,m.Y)(s.Op,{...n.form,children:r}))}function y({children:e}){const{theme:n}=(0,i.u)(),t=o.Children.toArray(e);c()(t.length<=3,"TagAssignmentRow must have 3 children or less");const s=Array(3).fill(null).map(((e,r)=>{var o;return null!==(o=t[r])&&void 0!==o?o:(0,m.Y)("span",{style:{width:n.general.heightSm}},r)}));return(0,m.Y)("div",{css:(0,r.AH)({display:"grid",gridTemplateColumns:"1fr 1fr min-content",gap:n.spacing.sm},""),children:s})}function M({children:e}){return(0,m.Y)(i.T.Text,{bold:!0,children:e})}var x=t(39330);var Y={name:"82a6rk",styles:"flex:1"};const _=(0,o.forwardRef)((({errorMessage:e,...n},t)=>(0,m.FD)("div",{css:Y,children:[(0,m.Y)(x.I,{validationState:e?"error":"info",...n,ref:t}),e&&(0,m.Y)(l.FormUI.Message,{message:e,type:"error"})]})));function I({index:e,rules:n,render:t}){const{name:r,keyProperty:o,getTagsValues:i,emptyValue:a,appendIfPossible:l}=f();return(0,m.Y)(s.xI,{name:`${r}.${e}.${o}`,rules:n,render:({field:e,fieldState:n,formState:r})=>{var s;const d=e.onChange;return e.onChange=function(e){var n;d(e);const t=i();null!==t&&void 0!==t&&null!==(n=t.at(-1))&&void 0!==n&&n[o]&&l(a,{shouldFocus:!1})},t?t({field:e,fieldState:n,formState:r}):(0,m.Y)(_,{componentId:"TagAssignmentKey.Default.Input",errorMessage:null===(s=n.error)||void 0===s?void 0:s.message,...e})}})}function b({rules:e,index:n,render:t}){const{name:r,valueProperty:o}=f();return(0,m.Y)(s.xI,{rules:e,name:`${r}.${n}.${o}`,render:({field:e,fieldState:n,formState:r})=>{var o;return t?t({field:e,fieldState:n,formState:r}):(0,m.Y)(_,{componentId:"TagAssignmentValue.Default.Input",errorMessage:null===(o=n.error)||void 0===o?void 0:o.message,...e})}})}function A(e){return(0,m.Y)(i.B,{icon:(0,m.Y)(l.TrashIcon,{}),...e})}function S({index:e,...n}){const{removeOrUpdate:t}=f();return(0,m.Y)(A,{onClick:()=>t(e),...n})}var w=t(88464);function T(e,n){if(void 0!==e)return 0===e&&c()(!1,"maxLength must be greater than 0"),{maxLength:{value:e,message:n.formatMessage({id:"JW0GbU",defaultMessage:"You can set a maximum of {maxLength} values"},{maxLength:e})}}}function C({name:e,maxLength:n,emptyValue:t,defaultValues:r,loading:i,form:a,keyProperty:l,valueProperty:d}){const[u]=(0,o.useState)(t),m=(0,s.xW)(),g=Boolean(m)&&!a,p=g?m:a;c()(p,"Nest your component on a FormProvider or pass a form prop"),c()(!(r&&g),"Define defaultValues at form context level");const{setValue:h}=p,f=function({name:e,maxLength:n,emptyValue:t,form:r,keyProperty:i}){const a=(0,w.A)(),l=(0,s.xW)(),d=Boolean(l)&&!r?l:r;c()(d,"Nest your component on a FormProvider or pass a form prop");const[u]=(0,o.useState)(t),{append:m,update:g,remove:p,...h}=(0,s.jz)({name:e,control:d.control,rules:T(n,a)}),{getValues:f}=d,v=(0,o.useCallback)((()=>f(e)),[f,e]),y=(0,o.useCallback)(((e,t)=>{const r=v();n&&r&&r.length>=n||m(e,t)}),[v,n,m]),M=(0,o.useCallback)((e=>{const n=v();if(n&&e===n.length-1)return g(e,u);const t=null===n||void 0===n?void 0:n.at(-1);if(null!==t&&void 0!==t&&t[i])return p(e),void m(u,{shouldFocus:!1});p(e)}),[u,v,i,m,p,g]);return{form:d,...h,originalAppend:m,update:g,originalRemove:p,appendIfPossible:y,removeOrUpdate:M,getTagsValues:v}}({name:e,maxLength:n,emptyValue:t,form:p,keyProperty:l}),v=f.getTagsValues;return(0,o.useEffect)((()=>{if(!i){if(r){const t=[...r];return(!n||n&&t.length<n)&&t.push(u),void h(e,t)}if(g){var t;const r=null!==(t=v())&&void 0!==t?t:[];return(!n||n&&r.length<n)&&r.push(u),void h(e,r)}h(e,[u])}}),[r,h,i,n,e,u,g,v]),{...f,form:p,maxLength:n,emptyValue:t,name:e,keyProperty:l,valueProperty:d}}const R="value",D=({form:e,name:n,initialTags:t})=>{const r=(0,w.A)(),o=C({name:n,emptyValue:{key:"",value:""},keyProperty:"key",valueProperty:R,form:e,defaultValues:t});return(0,m.FD)(v,{...o,children:[(0,m.FD)(y,{children:[(0,m.Y)(M,{children:(0,m.Y)(d.A,{id:"h2SXjO",defaultMessage:"Key"})}),(0,m.Y)(M,{children:(0,m.Y)(d.A,{id:"6yjymQ",defaultMessage:"Value"})})]}),o.fields.map(((e,n)=>(0,m.FD)(y,{children:[(0,m.Y)(I,{index:n,rules:{validate:{unique:e=>{const t=o.getTagsValues();return(null===t||void 0===t?void 0:t.findIndex((n=>n.key===e)))===n||r.formatMessage({id:"sLBHQp",defaultMessage:"Key must be unique"})},required:e=>{var t;const s=o.getTagsValues();return!(null!==s&&void 0!==s&&null!==(t=s.at(n))&&void 0!==t&&t[R]&&!e)||r.formatMessage({id:"J45Atg",defaultMessage:"Key is required if value is present"})}}}}),(0,m.Y)(b,{index:n}),(0,m.Y)(S,{index:n,componentId:"endpoint-tags-section.remove-button"})]},e.id)))]})},E="key",k="value",L="tags",F={key:"",value:""},U=({componentIdPrefix:e,title:n,visible:t,initialTags:u,isLoading:c=!1,error:g,onSubmit:p,onSuccess:h,onClose:f})=>{const v=`${e}.tag-assignment-modal`,[y,M]=(0,o.useState)(!1),{theme:x}=(0,i.u)(),Y=(0,s.mN)({mode:"onChange"}),_=()=>{M(!1),Y.reset({[L]:[F]}),null===f||void 0===f||f()},I=(0,m.Y)(d.A,{id:"AGWpnl",defaultMessage:"Add tags"});return{TagAssignmentModal:(0,m.FD)(a.d,{componentId:`${v}`,title:null!==n&&void 0!==n?n:I,visible:null!==t&&void 0!==t?t:y,destroyOnClose:!0,onCancel:_,footer:(0,m.FD)(m.FK,{children:[(0,m.Y)(i.B,{componentId:`${v}.submit-button`,onClick:_,disabled:c,children:(0,m.Y)(d.A,{id:"awekbG",defaultMessage:"Cancel"})}),(0,m.Y)(i.B,{componentId:`${v}.submit-button`,type:"primary",onClick:Y.handleSubmit((e=>{var n,t;const r=e[L].filter((e=>Boolean(e[E]))),o=null!==(n=r.filter((e=>!(null!==u&&void 0!==u&&u.some((n=>n[E]===e[E]&&n[k]===e[k]))))))&&void 0!==n?n:[],s=null!==(t=null===u||void 0===u?void 0:u.filter((e=>!r.some((n=>n[E]===e[E]&&n[k]===e[k])))))&&void 0!==t?t:[];p(o,s).then((()=>{_(),null===h||void 0===h||h()}))})),loading:c,disabled:c,children:(0,m.Y)(d.A,{id:"C6ReUY",defaultMessage:"Save"})})]}),children:[g&&(0,m.Y)(l.Alert,{type:"error",message:g,componentId:`${v}.error`,closable:!1,css:(0,r.AH)({marginBottom:x.spacing.sm},"")}),(0,m.Y)(D,{name:L,form:Y,initialTags:u})]}),showTagAssignmentModal:()=>{M(!0)},hideTagAssignmentModal:_}}},40029:function(e,n,t){t.d(n,{I:function(){return c}});var r=t(89555),o=t(31014),s=t(62758),i=t(88464),a=t(16934),l=t(39330),d=t(76137),u=t(50111);const c=({chartsSearchFilter:e})=>{const n=(0,s.g_)(),{theme:t}=(0,a.u)(),[c,m]=(0,o.useState)((()=>null!==e&&void 0!==e?e:"")),[g,p]=(0,o.useState)(!1),{formatMessage:h}=(0,i.A)(),f=(0,o.useCallback)((e=>{n((n=>({...n,chartsSearchFilter:e}))),p(!1)}),[n]),v=(0,d.YQ)(f,150);return(0,u.Y)(l.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsfilterinput.tsx_30",role:"searchbox",prefix:(0,u.Y)("div",{css:(0,r.AH)({width:t.general.iconFontSize,lineHeight:0},""),children:g?(0,u.Y)(a.S,{size:"small"}):(0,u.Y)(l.S,{})}),value:c,allowClear:!0,onChange:e=>{m(e.target.value),p(!0),v(e.target.value)},placeholder:h({id:"Xs1oJm",defaultMessage:"Search metric charts"})})}},48588:function(e,n,t){t.d(n,{L:function(){return i}});t(31014);var r=t(68048),o=t(48443),s=t(50111);function i(e){const{usesFullHeight:n,...t}=e;return(0,s.FD)(r.PageWrapper,{css:n?a.useFullHeightLayout:a.wrapper,children:[(0,s.Y)(o.S,{css:a.fixedSpacer}),n?e.children:(0,s.Y)("div",{...t,css:a.container})]})}i.defaultProps={usesFullHeight:!1};const a={useFullHeightLayout:{height:"100%",display:"flex",flexDirection:"column","&:last-child":{flexGrow:1}},wrapper:{flex:1},fixedSpacer:{flexShrink:0},container:{width:"100%",flexGrow:1,paddingBottom:24}}},53677:function(e,n,t){t.d(n,{j:function(){return p}});var r=t(31014),o=t(10811),s=t(64912),i=t(67245),a=t(58645),l=t(26809),d=t(7204),u=t(50111);class c extends r.Component{constructor(...e){super(...e),this.formRef=r.createRef(),this.handleRenameRun=e=>{const n=e[a.m],t=(0,d.yk)();return this.props.updateRunApi(this.props.runUuid,n,t).then((()=>{var e,n;return null===(e=(n=this.props).onSuccess)||void 0===e?void 0:e.call(n)}))}}render(){const{isOpen:e=!1,runName:n}=this.props;return(0,u.Y)(i.B,{title:this.props.intl.formatMessage({id:"+Dnww0",defaultMessage:"Rename Run"}),okText:this.props.intl.formatMessage({id:"7NKkk1",defaultMessage:"Save"}),isOpen:e,handleSubmit:this.handleRenameRun,onClose:this.props.onClose,children:(0,u.Y)(a.P,{type:"run",name:n,innerRef:this.formRef,visible:e,validator:async(e,n)=>{if("string"===typeof n&&n.length&&!n.trim())throw new Error(this.props.intl.formatMessage({id:"ze1m7Z",defaultMessage:"Run name cannot consist only of whitespace!"}));return!0}})})}}const m={updateRunApi:l.FZ},g=(0,s.Ay)(c),p=(0,o.Ng)(void 0,m)(g)},55999:function(e,n,t){t.d(n,{L:function(){return l}});var r=t(76010),o=t(26809),s=t(25866),i=t(31014),a=t(10811);const l=({runUuids:e,runUuidsIsActive:n,autoRefreshEnabled:t,enabled:l})=>{const d=(0,a.wA)(),u=e.slice(0,s.Lf).join(",");(0,i.useEffect)((()=>{l&&!t&&u.split(",").forEach((e=>{e&&d((0,o.LN)(e))}))}),[u,d,t,l]);const c=(0,i.useRef)(void 0),m=(0,i.useRef)(t&&l);m.current=t;const g=n.slice(0,s.Lf).join(",");(0,i.useEffect)((()=>{let e=!1;if(!l||!t)return;const n=async e=>{const n=u.split(","),t=g.split(",");(e?n.filter(((e,n)=>"true"===t[n])):n).forEach((n=>{n&&d((0,o.LN)(n,e))}))},i=async()=>{if(m.current&&!e){try{await n(!0)}catch(t){r.A.logErrorAndNotifyUser(t)}clearTimeout(c.current),m.current&&!e&&(c.current=window.setTimeout(i,s.zD))}};return n(!1).then(i),()=>{n(!0),e=!0,clearTimeout(c.current)}}),[d,u,g,t,l])}},64558:function(e,n,t){var r=t(31014),o=t(50111);class s extends r.Component{render(){return(0,o.Y)("div",{children:"Resource not found."})}}n.A=s},72661:function(e,n,t){t.d(n,{o:function(){return l}});var r=t(41261),o=t(8986),s=t(9133),i=t(53962);const a=async({queryKey:[,e]})=>{const n=(0,s.chunk)(e,100);return Promise.all(n.map((e=>{const n=new URLSearchParams;for(const t of e)n.append("model_ids",t);return(0,o.G)((0,i.we)(`ajax-api/2.0/mlflow/logged-models:batchGet?${n.toString()}`),"GET")})))},l=({modelIds:e},n)=>{const{data:t,isLoading:o,isFetching:s,refetch:i,error:l}=(0,r.I)({queryKey:(d=null!==e&&void 0!==e?e:[],["GET_LOGGED_MODELS",d]),queryFn:a,select:e=>null===e||void 0===e?void 0:e.flatMap((e=>(null===e||void 0===e?void 0:e.models)||[])),retry:!1,...n});var d;return{isLoading:o,isFetching:s,data:t,refetch:i,error:l}}}}]);
//# sourceMappingURL=8455.d8d24bfc.chunk.js.map