"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[6462],{30922:function(e,a,s){s.d(a,{q:function(){return n}});var l=s(16934),o=s(88443),t=s(50111);const n=({row:{original:e},getValue:a})=>{const s=a();return s?(0,t.Y)(l.T.Text,{children:(0,t.Y)(o.A,{id:"sM0MBJ",defaultMessage:"Version {version}",values:{version:s}})}):null}},43683:function(e,a,s){s.d(a,{Q:function(){return w}});var l=s(89555),o=s(9133),t=s(31014),n=s(16934),r=s(48443),i=s(68048),d=s(88464),c=s(88443),u=s(13369),g=s(50111);var m={name:"4zleql",styles:"display:block"};function p(e){return a=>function(e,a){const s=(0,d.A)(),{theme:r}=(0,n.u)(),c=e.props.searchValue.toLowerCase();return(0,t.useMemo)((()=>{if(!c)return e;if((0,o.sortedIndexOf)(a,c)>=0)return e;const n=/^[^,.:/=\-\s]+$/.test(c);return t.cloneElement(e,{flattenOptions:[{data:{value:c,disabled:!n,style:{color:n?r.colors.actionTertiaryTextDefault:r.colors.actionDisabledText},children:(0,g.Y)(i.LegacyTooltip,{title:n?void 0:s.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),placement:"right",children:(0,g.FD)("span",{css:m,children:[(0,g.Y)(i.PlusIcon,{css:(0,l.AH)({marginRight:r.spacing.sm},"")}),s.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:c})]})})},key:c,groupOption:!1},...e.props.flattenOptions]})}),[a,e,c,s,r])}(a,e)}var f={name:"1d3w5wq",styles:"width:100%"};function h({allAvailableTags:e,control:a,onKeyChangeCallback:s}){const l=(0,d.A)(),[o,n]=(0,t.useState)(!1),r=(0,t.useRef)(null),{field:c,fieldState:m}=(0,u.as)({control:a,name:"key",rules:{required:{message:l.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,g.Y)(i.LegacySelect,{allowClear:!0,ref:r,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:p(e)},css:f,placeholder:l.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:c.value,defaultValue:c.value,open:o,onDropdownVisibleChange:e=>{n(e)},filterOption:(e,a)=>null===a||void 0===a?void 0:a.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{c.onChange(e),null===s||void 0===s||s(e)},onClear:()=>{c.onChange(void 0),null===s||void 0===s||s(void 0)},validationState:m.error?"error":void 0,children:e.map((e=>(0,g.Y)(i.LegacySelect.Option,{value:e,children:e},e)))})}var v=s(98597),y=s(52350);function _(e){return new Map(e.map((e=>[e.key,e])))}var M={name:"82a6rk",styles:"flex:1"},k={name:"82a6rk",styles:"flex:1"};const w=({onSuccess:e,saveTagsHandler:a,allAvailableTags:s,valueRequired:m=!1,title:p})=>{const f=(0,t.useRef)(),[w,T]=(0,t.useState)(""),{theme:x}=(0,n.u)(),[b,C]=(0,t.useState)(new Map),[A,V]=(0,t.useState)(new Map),[F,I]=(0,t.useState)(!1),S=(0,u.mN)({defaultValues:{key:void 0,value:""}}),L=()=>I(!1),D=(0,t.useCallback)((e=>{f.current=e,C(_(e.tags||[])),V(_(e.tags||[])),S.reset(),I(!0)}),[S]),P=async()=>{f.current&&(T(""),R(!0),a(f.current,Array.from(b.values()),Array.from(A.values())).then((()=>{L(),null===e||void 0===e||e(),R(!1)})).catch((e=>{var a;R(!1),T(e instanceof y.s?null===(a=e.getUserVisibleError())||void 0===a?void 0:a.message:e.message)})))},B=(0,d.A)(),E=S.watch(),[K,R]=(0,t.useState)(!1),H=(0,t.useMemo)((()=>!(0,o.isEqual)((0,o.sortBy)(Array.from(b.values()),"key"),(0,o.sortBy)(Array.from(A.values()),"key"))),[b,A]),O=E.key||E.value,U=H&&O;return{EditTagsModal:(0,g.FD)(r.d,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135",destroyOnClose:!0,visible:F,title:null!==p&&void 0!==p?p:(0,g.Y)(c.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:L,footer:(0,g.FD)(n.y,{children:[(0,g.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:L,css:(0,l.AH)({marginRight:H?0:x.spacing.sm},""),children:B.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),U?(0,g.Y)(Y,{formValues:E,isLoading:K,onSaveTask:P}):(0,g.Y)(i.LegacyTooltip,{title:H?void 0:B.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),children:(0,g.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!H,loading:K,type:"primary",onClick:P,children:B.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,g.FD)("form",{onSubmit:S.handleSubmit((()=>{if(m&&!E.value.trim())return;const e=new Map(A);e.set(E.key,E),V(e),S.reset()})),css:(0,l.AH)({display:"flex",alignItems:"flex-end",gap:x.spacing.md},""),children:[(0,g.FD)("div",{css:(0,l.AH)({minWidth:0,display:"flex",gap:x.spacing.md,flex:1},""),children:[(0,g.FD)("div",{css:M,children:[(0,g.Y)(i.FormUI.Label,{htmlFor:"key",children:B.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,g.Y)(h,{allAvailableTags:s||[],control:S.control,onKeyChangeCallback:e=>{var a;const s=e?A.get(e):void 0;S.setValue("value",null!==(a=null===s||void 0===s?void 0:s.value)&&void 0!==a?a:"")}})]}),(0,g.FD)("div",{css:k,children:[(0,g.Y)(i.FormUI.Label,{htmlFor:"value",children:m?B.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):B.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,g.Y)(i.RHFControlledComponents.Input,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223",name:"value",control:S.control,"aria-label":m?B.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):B.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:B.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,g.Y)(i.LegacyTooltip,{title:B.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,g.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":B.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,g.Y)(i.PlusIcon,{})})})]}),w&&(0,g.Y)(i.FormUI.Message,{type:"error",message:w}),(0,g.Y)("div",{css:(0,l.AH)({display:"flex",rowGap:x.spacing.xs,flexWrap:"wrap",marginTop:x.spacing.sm},""),children:Array.from(A.values()).map((e=>(0,g.Y)(v.t,{isClosable:!0,tag:e,onClose:()=>(({key:e})=>{V((a=>(a.delete(e),new Map(a))))})(e)},e.key)))})]}),showEditTagsModal:D,isLoading:K}};var T={name:"1y0ex1",styles:"max-width:400px"};function Y({isLoading:e,formValues:a,onSaveTask:s}){const t=(0,d.A)(),{theme:r}=(0,n.u)(),i=`${`${(0,o.truncate)(a.key,{length:20})||"_"}`}${a.value?`:${(0,o.truncate)(a.value,{length:20})}`:""}`,c=t.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:i});return(0,g.FD)(n.ax.Root,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309",children:[(0,g.Y)(n.ax.Trigger,{asChild:!0,children:(0,g.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:e,type:"primary",children:t.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,g.FD)(n.ax.Content,{align:"end","aria-label":c,children:[(0,g.Y)(n.T.Paragraph,{css:T,children:c}),(0,g.Y)(n.ax.Close,{asChild:!0,children:(0,g.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:s,children:t.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,g.Y)(n.ax.Close,{asChild:!0,children:(0,g.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,l.AH)({marginLeft:r.spacing.sm},""),children:t.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,g.Y)(n.ax.Arrow,{})]})]})}},56412:function(e,a,s){s.d(a,{i:function(){return d}});var l=s(31014),o=s(88443),t=s(68048),n=s(16934),r=s(50111);var i={name:"1739oy8",styles:"z-index:1"};const d=({copyText:e,showLabel:a=!0,componentId:s,...d})=>{const[c,u]=(0,l.useState)(!1);return(0,r.Y)(t.LegacyTooltip,{title:(0,r.Y)(o.A,{id:"X+boXI",defaultMessage:"Copied"}),dangerouslySetAntdProps:{visible:c},children:(0,r.Y)(n.B,{componentId:null!==s&&void 0!==s?s:"mlflow.shared.copy_button",type:"primary",onClick:()=>{navigator.clipboard.writeText(e),u(!0),setTimeout((()=>{u(!1)}),3e3)},onMouseLeave:()=>{u(!1)},css:i,children:a?(0,r.Y)(o.A,{id:"1Iq+NW",defaultMessage:"Copy"}):void 0,...d})})}},60709:function(e,a,s){s.d(a,{i:function(){return i}});var l=s(77020),o=s(43683),t=s(82832),n=s(31014),r=s(98590);const i=({onSuccess:e})=>{const a=(0,l.n)({mutationFn:async({toAdd:e,toDelete:a,promptId:s})=>Promise.all([...e.map((({key:e,value:a})=>t.M.setRegisteredPromptTag(s,e,a))),...a.map((({key:e})=>t.M.deleteRegisteredPromptTag(s,e)))])}),{EditTagsModal:s,showEditTagsModal:i,isLoading:d}=(0,o.Q)({valueRequired:!0,saveTagsHandler:(s,l,o)=>{const{addedOrModifiedTags:t,deletedTags:n}=(0,r.Rf)(l,o);return new Promise(((l,o)=>{if(!s.name)return o();a.mutate({promptId:s.name,toAdd:t,toDelete:n},{onSuccess:()=>{l(),null===e||void 0===e||e()},onError:o})}))}});return{EditTagsModal:s,showEditPromptTagsModal:(0,n.useCallback)((e=>i({name:e.name,tags:e.tags.filter((e=>(0,r.oD)(e.key)))})),[i]),isLoading:d}}},72282:function(e,a,s){s.d(a,{u:function(){return d}});var l=s(68048),o=s(16934),t=s(88443),n=s(84069),r=s(50111);var i={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const d=({error:e})=>{var a;return(0,r.Y)(n.m,{css:i,children:(0,r.Y)(l.Empty,{"data-testid":"fallback",title:(0,r.Y)(t.A,{id:"AOoWxS",defaultMessage:"Error"}),description:null!==(a=null===e||void 0===e?void 0:e.message)&&void 0!==a?a:(0,r.Y)(t.A,{id:"zmMR5p",defaultMessage:"An error occurred while rendering this component."}),image:(0,r.Y)(o.l,{})})})}},84069:function(e,a,s){s.d(a,{m:function(){return n}});var l=s(68048),o=s(50111);var t={name:"13udsys",styles:"height:100%"};const n=({children:e,className:a})=>(0,o.Y)(l.PageWrapper,{css:t,className:a,children:e})},98597:function(e,a,s){s.d(a,{t:function(){return h}});var l=s(89555),o=s(68048),t=s(16934),n=s(31014),r=s(88464),i=s(48443),d=s(56412),c=s(50111);const{Paragraph:u}=t.T;var g={name:"zjik7",styles:"display:flex"},m={name:"1ff36h2",styles:"flex-grow:1"};const p=n.memo((e=>{const{theme:a}=(0,t.u)();return(0,c.Y)(i.d,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:g,children:[(0,c.Y)(u,{css:m,children:(0,c.Y)("pre",{css:(0,l.AH)({backgroundColor:a.colors.backgroundPrimary,marginTop:a.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,l.AH)({marginTop:a.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(o.CopyIcon,{}),"aria-label":"Copy"})})]})})}));function f(e=!0){return e?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const h=({isClosable:e=!1,onClose:a,tag:s,enableFullViewModal:i=!1,charLimit:d=30,maxWidth:u=300,className:g})=>{const m=(0,r.A)(),[h,v]=(0,n.useState)(!1),{shouldTruncateKey:y,shouldTruncateValue:_}=function(e,a=30){const{key:s,value:l}=e,o=s.length+l.length,t=s.length>l.length,n=t?l.length:s.length;return o<=a?{shouldTruncateKey:!1,shouldTruncateValue:!1}:n>a/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:t,shouldTruncateValue:!t}}(s,d),M=i&&(y||_),k=m.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(o.Tag,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:e,onClose:a,title:s.key,className:g,children:(0,c.Y)(o.LegacyTooltip,{title:M?k:"",children:(0,c.FD)("span",{css:(0,l.AH)({maxWidth:u,display:"inline-flex"},""),onClick:()=>M?v(!0):void 0,children:[(0,c.Y)(t.T.Text,{bold:!0,title:s.key,css:f(y),children:s.key}),s.value&&(0,c.FD)(t.T.Text,{title:s.value,css:f(_),children:[": ",s.value]})]})})}),(0,c.Y)("div",{children:h&&(0,c.Y)(p,{tagKey:s.key,tagValue:s.value,isKeyValueTagFullViewModalVisible:h,setIsKeyValueTagFullViewModalVisible:v})})]})}}}]);
//# sourceMappingURL=6462.1a6a178d.chunk.js.map