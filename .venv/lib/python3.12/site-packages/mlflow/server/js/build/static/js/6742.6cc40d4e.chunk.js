"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[6742],{66742:function(e,r,t){t.r(r),t.d(r,{default:function(){return q}});var n=t(84069),a=t(41261),o=t(31014),i=t(82832);const s=({queryKey:e})=>{const[,{searchFilter:r,pageToken:t}]=e;return i.M.listRegisteredPrompts(r,t)};var l=t(48443),u=t(68048),c=t(16934),d=t(88443),m=t(50111);const f=({searchFilter:e,onSearchFilterChange:r})=>(0,m.Y)(u.TableFilterLayout,{children:(0,m.Y)(u.TableFilterInput,{placeholder:"Search prompts by name",componentId:"mlflow.prompts.list.search",value:e,onChange:e=>r(e.target.value)})});var p=t(89555),g=t(70618),v=t(9856),h=t(88464),P=t(98590),w=t(98597);var y={name:"zjik7",styles:"display:flex"},x={name:"tyk0n8",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex"},M={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const Y=({row:{original:e},table:{options:{meta:r}}})=>{var t;const n=(0,h.A)(),{onEditTags:a}=r,o=(null===e||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.filter((e=>(0,P.oD)(e.key))))||[],i=o.length>0;return(0,m.FD)("div",{css:y,children:[(0,m.Y)("div",{css:x,children:null===o||void 0===o?void 0:o.map((e=>(0,m.Y)(w.t,{tag:e},e.key)))}),(0,m.Y)(c.B,{componentId:"mlflow.prompts.list.tag.add",size:"small",icon:i?(0,m.Y)(u.PencilIcon,{}):void 0,onClick:()=>null===a||void 0===a?void 0:a(e),"aria-label":n.formatMessage({id:"lA8QO2",defaultMessage:"Edit tags"}),children:i?void 0:(0,m.Y)(d.A,{id:"iDpAK8",defaultMessage:"Add tags"}),css:M,type:"tertiary"})]})};var F=t(48624),b=t(58481);const R=({row:{original:e},getValue:r})=>{const t=r();return e.name?(0,m.Y)(F.N_,{to:b.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name)),children:t}):t};var T=t(76010),k=t(30922),A=t(9133);var C={name:"1h3rtzg",styles:"align-items:center"};const N=({prompts:e,hasNextPage:r,hasPreviousPage:t,isLoading:n,isFiltered:a,onNextPage:i,onPreviousPage:s,onEditTags:l})=>{const{theme:f}=(0,c.u)(),P=(()=>{const e=(0,h.A)();return(0,o.useMemo)((()=>[{header:e.formatMessage({id:"tzA/LZ",defaultMessage:"Name"}),accessorKey:"name",id:"name",cell:R},{header:e.formatMessage({id:"bmd4rb",defaultMessage:"Latest version"}),cell:k.q,accessorFn:({latest_versions:e})=>{var r;return null===(r=(0,A.first)(e))||void 0===r?void 0:r.version},id:"latestVersion"},{header:e.formatMessage({id:"FiKsFK",defaultMessage:"Last modified"}),id:"lastModified",accessorFn:({last_updated_timestamp:r})=>T.A.formatTimestamp(r,e)},{header:e.formatMessage({id:"KMVqUP",defaultMessage:"Tags"}),accessorKey:"tags",id:"tags",cell:Y}]),[e])})(),w=(0,g.N4)({data:null!==e&&void 0!==e?e:[],columns:P,getCoreRowModel:(0,v.HT)(),getRowId:(e,r)=>{var t;return null!==(t=e.name)&&void 0!==t?t:r.toString()},meta:{onEditTags:l}});return(0,m.FD)(u.Table,{scrollable:!0,pagination:(0,m.Y)(u.CursorPagination,{hasNextPage:r,hasPreviousPage:t,onNextPage:i,onPreviousPage:s,componentId:"mlflow.prompts.list.pagination"}),empty:(()=>{const r=!n&&(0,A.isEmpty)(e);return r&&a?(0,m.Y)(u.Empty,{image:(0,m.Y)(u.NoIcon,{}),title:(0,m.Y)(d.A,{id:"hlpNRa",defaultMessage:"No prompts found"}),description:null}):r?(0,m.Y)(u.Empty,{title:(0,m.Y)(d.A,{id:"/fwKFW",defaultMessage:"No prompts created"}),description:(0,m.Y)(d.A,{id:"WM5IeI",defaultMessage:'Use "Create prompt" button in order to create a new prompt'})}):null})(),children:[(0,m.Y)(u.TableRow,{isHeader:!0,children:w.getLeafHeaders().map((e=>(0,m.Y)(u.TableHeader,{componentId:"mlflow.prompts.list.table.header",children:(0,g.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),n?(0,m.Y)(u.TableSkeletonRows,{table:w}):w.getRowModel().rows.map((e=>(0,m.Y)(u.TableRow,{css:(0,p.AH)({height:f.general.buttonHeight},""),children:e.getAllCells().map((e=>(0,m.Y)(u.TableCell,{css:C,children:(0,g.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))]})};var S=t(60709),E=t(70724),_=t(20109),I=t(62448),D=t(72282),K=t(76137);var L={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},H={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};var q=(0,_.X)(I.A.mlflowServices.EXPERIMENTS,(()=>{const[e,r]=(0,o.useState)(""),t=(0,F.Zp)(),[i]=(0,K.d7)(e,500),{data:p,error:g,refetch:v,hasNextPage:h,hasPreviousPage:P,isLoading:w,onNextPage:y,onPreviousPage:x}=(({searchFilter:e}={})=>{var r,t,n,i;const l=(0,o.useRef)([]),[u,c]=(0,o.useState)(void 0),d=(0,a.I)(["prompts_list",{searchFilter:e,pageToken:u}],{queryFn:s,retry:!1}),m=(0,o.useCallback)((()=>{var e;l.current.push(u),c(null===(e=d.data)||void 0===e?void 0:e.next_page_token)}),[null===(r=d.data)||void 0===r?void 0:r.next_page_token,u]),f=(0,o.useCallback)((()=>{const e=l.current.pop();c(e)}),[]);return{data:null===(t=d.data)||void 0===t?void 0:t.registered_models,error:null!==(n=d.error)&&void 0!==n?n:void 0,isLoading:d.isLoading,hasNextPage:void 0!==(null===(i=d.data)||void 0===i?void 0:i.next_page_token),hasPreviousPage:Boolean(u),onNextPage:m,onPreviousPage:f,refetch:d.refetch}})({searchFilter:i}),{EditTagsModal:M,showEditPromptTagsModal:Y}=(0,S.i)({onSuccess:v}),{CreatePromptModal:R,openModal:T}=(0,E.z)({mode:E.v.CreatePrompt,onSuccess:({promptName:e})=>t(b.Ay.getPromptDetailsPageRoute(e))});return(0,m.FD)(n.m,{css:L,children:[(0,m.Y)(l.S,{shrinks:!1}),(0,m.Y)(u.Header,{title:(0,m.Y)(d.A,{id:"aLRRam",defaultMessage:"Prompts"}),buttons:(0,m.Y)(c.B,{componentId:"mlflow.prompts.list.create",type:"primary",onClick:T,children:(0,m.Y)(d.A,{id:"7x6xu8",defaultMessage:"Create prompt"})})}),(0,m.Y)(l.S,{shrinks:!1}),(0,m.FD)("div",{css:H,children:[(0,m.Y)(f,{searchFilter:e,onSearchFilterChange:r}),(null===g||void 0===g?void 0:g.message)&&(0,m.FD)(m.FK,{children:[(0,m.Y)(u.Alert,{type:"error",message:g.message,componentId:"mlflow.prompts.list.error",closable:!1}),(0,m.Y)(l.S,{})]}),(0,m.Y)(N,{prompts:p,error:g,hasNextPage:h,hasPreviousPage:P,isLoading:w,isFiltered:Boolean(e),onNextPage:y,onPreviousPage:x,onEditTags:Y})]}),M,R]})}),void 0,D.u)},76137:function(e,r,t){t.d(r,{YQ:function(){return a},d7:function(){return i}});var n=t(31014);function a(e,r,t){var a=this,o=(0,n.useRef)(null),i=(0,n.useRef)(0),s=(0,n.useRef)(null),l=(0,n.useRef)([]),u=(0,n.useRef)(),c=(0,n.useRef)(),d=(0,n.useRef)(e),m=(0,n.useRef)(!0);d.current=e;var f="undefined"!=typeof window,p=!r&&0!==r&&f;if("function"!=typeof e)throw new TypeError("Expected a function");r=+r||0;var g=!!(t=t||{}).leading,v=!("trailing"in t)||!!t.trailing,h="maxWait"in t,P="debounceOnServer"in t&&!!t.debounceOnServer,w=h?Math.max(+t.maxWait||0,r):null;(0,n.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var y=(0,n.useMemo)((function(){var e=function(e){var r=l.current,t=u.current;return l.current=u.current=null,i.current=e,c.current=d.current.apply(t,r)},t=function(e,r){p&&cancelAnimationFrame(s.current),s.current=p?requestAnimationFrame(e):setTimeout(e,r)},n=function(e){if(!m.current)return!1;var t=e-o.current;return!o.current||t>=r||t<0||h&&e-i.current>=w},y=function(r){return s.current=null,v&&l.current?e(r):(l.current=u.current=null,c.current)},x=function e(){var a=Date.now();if(n(a))return y(a);if(m.current){var s=r-(a-o.current),l=h?Math.min(s,w-(a-i.current)):s;t(e,l)}},M=function(){if(f||P){var d=Date.now(),p=n(d);if(l.current=[].slice.call(arguments),u.current=a,o.current=d,p){if(!s.current&&m.current)return i.current=o.current,t(x,r),g?e(o.current):c.current;if(h)return t(x,r),e(o.current)}return s.current||t(x,r),c.current}};return M.cancel=function(){s.current&&(p?cancelAnimationFrame(s.current):clearTimeout(s.current)),i.current=0,l.current=o.current=u.current=s.current=null},M.isPending=function(){return!!s.current},M.flush=function(){return s.current?y(Date.now()):c.current},M}),[g,h,r,w,v,p,f,P]);return y}function o(e,r){return e===r}function i(e,r,t){var i=t&&t.equalityFn||o,s=(0,n.useRef)(e),l=(0,n.useState)({})[1],u=a((0,n.useCallback)((function(e){s.current=e,l({})}),[l]),r,t),c=(0,n.useRef)(e);return i(c.current,e)||(u(e),c.current=e),[s.current,u]}}}]);
//# sourceMappingURL=6742.6cc40d4e.chunk.js.map