"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[532],{2844:function(e,o){o.A={'code[class*="language-"]':{fontFamily:'Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", "Courier New", Courier, monospace',fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC"},'pre[class*="language-"]':{fontFamily:'Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", "Courier New", Courier, monospace',fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC",padding:"1em",margin:".5em 0",overflow:"auto"},'pre > code[class*="language-"]':{fontSize:"1em"},'pre[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},':not(pre) > code[class*="language-"]':{padding:".1em",borderRadius:".3em"},comment:{color:"#6c6783"},prolog:{color:"#6c6783"},doctype:{color:"#6c6783"},cdata:{color:"#6c6783"},punctuation:{color:"#6c6783"},namespace:{Opacity:".7"},tag:{color:"#3AACE2"},operator:{color:"#3AACE2"},number:{color:"#3AACE2"},property:{color:"#5DFAFC"},function:{color:"#5DFAFC"},"tag-id":{color:"#eeebff"},selector:{color:"#eeebff"},"atrule-id":{color:"#eeebff"},"code.language-javascript":{color:"#c4b9fe"},"attr-name":{color:"#c4b9fe"},"code.language-css":{color:"#ffffff"},"code.language-scss":{color:"#ffffff"},boolean:{color:"#ffffff"},string:{color:"#ffffff"},entity:{color:"#ffffff",cursor:"help"},url:{color:"#ffffff"},".language-css .token.string":{color:"#ffffff"},".language-scss .token.string":{color:"#ffffff"},".style .token.string":{color:"#ffffff"},"attr-value":{color:"#ffffff"},keyword:{color:"#ffffff"},control:{color:"#ffffff"},directive:{color:"#ffffff"},unit:{color:"#ffffff"},statement:{color:"#ffffff"},regex:{color:"#ffffff"},atrule:{color:"#ffffff"},placeholder:{color:"#ffffff"},variable:{color:"#ffffff"},deleted:{textDecoration:"line-through"},inserted:{borderBottom:"1px dotted #eeebff",textDecoration:"none"},italic:{fontStyle:"italic"},important:{fontWeight:"bold",color:"#c4b9fe"},bold:{fontWeight:"bold"},"pre > code.highlight":{Outline:".4em solid #8a75f5",OutlineOffset:".4em"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"#2c2937"},".line-numbers .line-numbers-rows > span:before":{color:"#3c3949"},".line-highlight.line-highlight":{background:"linear-gradient(to right, rgba(224, 145, 66, 0.2) 70%, rgba(224, 145, 66, 0))"}}},7450:function(e,o,n){n.d(o,{sA:function(){return s.sA},tz:function(){return s.tz},zR:function(){return s.zR}});var s=n(69526);n(68558)},9650:function(e,o,n){n.d(o,{Ld:function(){return a.L},ad:function(){return s.a}});n(24507);var s=n(26785),a=n(48128)},23381:function(e,o,n){n.d(o,{t:function(){return y}});var s=n(89555),a=n(9133),i=n(31014),t=n(68048),r=n(16934),l=n(48443),d=n(86020),c=n(88464),p=n(88443),u=n(50111);var m={name:"1d3w5wq",styles:"width:100%"},g={name:"s079uh",styles:"margin-top:2px"},f={name:"82a6rk",styles:"flex:1"},v={name:"82a6rk",styles:"flex:1"};const h=({renderKey:e,setDraftAliases:o,existingAliases:n,draftAliases:a,version:l,aliasToVersionMap:h,disabled:b})=>{const y=(0,c.A)(),[w,M]=(0,i.useState)(!1),{theme:Y}=(0,r.u)(),A=(0,i.useCallback)((e=>{o((o=>o.filter((o=>o!==e))))}),[o]),x=(0,i.useCallback)((e=>{const n=e.map((e=>e.replace(/[^\w-]/g,"").toLowerCase().substring(0,255))).filter((e=>e.length>0)),s=Array.from(new Set(n));o(s),M(!1)}),[o]);return(0,u.FD)(t.LegacySelect,{disabled:b,filterOption:(e,o)=>null===o||void 0===o?void 0:o.value.toLowerCase().startsWith(e.toLowerCase()),placeholder:y.formatMessage({id:"bQZDSv",defaultMessage:"Enter aliases (champion, challenger, etc)"}),allowClear:!0,css:m,mode:"tags",onChange:x,dangerouslySetAntdProps:{dropdownMatchSelectWidth:!0,tagRender:({value:e})=>(0,u.Y)(d.Z,{compact:!0,css:g,closable:!0,onClose:()=>A(e.toString()),value:e.toString()})},onDropdownVisibleChange:M,open:w,value:a||[],children:[n.map((e=>(0,u.Y)(t.LegacySelect.Option,{value:e,"data-testid":"model-alias-option",children:(0,u.FD)("div",{css:(0,s.AH)({display:"flex",marginRight:Y.spacing.xs},""),children:[(0,u.Y)("div",{css:f,children:e}),(0,u.Y)("div",{children:(0,u.Y)(p.A,{id:"4OcdLd",defaultMessage:"This version"})})]},e)},e))),Object.entries(h).filter((([,e])=>e!==l)).map((([e,o])=>(0,u.Y)(t.LegacySelect.Option,{value:e,"data-testid":"model-alias-option",children:(0,u.FD)("div",{css:(0,s.AH)({display:"flex",marginRight:Y.spacing.xs},""),children:[(0,u.Y)("div",{css:v,children:e}),(0,u.Y)("div",{children:(0,u.Y)(p.A,{id:"Boj6Fm",defaultMessage:"Version {version}",values:{version:o}})})]},e)},e)))]},JSON.stringify(e))};var b=n(52350);const y=({aliases:e,onSuccess:o,onSave:n,getTitle:d,description:c})=>{const[m,g]=(0,i.useState)(!1),[f,v]=(0,i.useState)(!1),[y]=t.LegacyForm.useForm(),[w,M]=(0,i.useState)(""),{theme:Y}=(0,r.u)(),[A,x]=(0,i.useState)([]),[k,S]=(0,i.useState)([]),[C,V]=(0,i.useState)("0"),D=(0,i.useCallback)((o=>{const n=e.filter((({version:e})=>e===o)).map((({alias:e})=>e))||[];o&&(x(n),S(n),V(o),v(!0))}),[e]),T=(0,i.useMemo)((()=>{const o=e.reduce(((e,o)=>{var n;return e.some((({version:e})=>e===o.version))?(null===(n=e.find((({version:e})=>e===o.version)))||void 0===n||n.aliases.push(o.alias),e):[...e,{version:o.version,aliases:[o.alias]}]}),[]).filter((({version:e})=>e!==C));return k.map((e=>({alias:e,otherVersion:o.find((o=>{var n;return null===(n=o.aliases)||void 0===n?void 0:n.find((o=>o===e))}))}))).filter((({otherVersion:e})=>e))}),[e,k,C]),I=(0,i.useMemo)((()=>e.reduce(((e,{alias:o,version:n})=>({...e,[o]:n})),{})||{}),[e]),P=(0,a.isEqual)(A.slice().sort(),k.slice().sort()),E=k.length>10,F=P||E;return{EditAliasesModal:(0,u.FD)(l.d,{componentId:"mlflow.edit-aliases-modal",visible:f,footer:(0,u.FD)("div",{children:[(0,u.Y)(r.B,{componentId:"mlflow.edit-aliases-modal.cancel-button",onClick:()=>v(!1),children:(0,u.Y)(p.A,{id:"3yuDKB",defaultMessage:"Cancel"})}),(0,u.Y)(r.B,{componentId:"mlflow.edit-aliases-modal.save-button",loading:m,type:"primary",disabled:F,onClick:()=>{M(""),g(!0),n(C,A,k).then((()=>{g(!1),v(!1),null===o||void 0===o||o()})).catch((e=>{if(g(!1),e instanceof b.s){const o=e.getMessageField()||e.getUserVisibleError().toString()||e.text;M(o)}else M(e.message)}))},children:(0,u.Y)(p.A,{id:"j4vtTO",defaultMessage:"Save aliases"})})]}),destroyOnClose:!0,title:d(C),onCancel:()=>v(!1),confirmLoading:!1,children:[(0,u.Y)(r.T.Paragraph,{children:c}),(0,u.FD)(t.LegacyForm,{form:y,layout:"vertical",children:[(0,u.Y)(t.LegacyForm.Item,{children:(0,u.Y)(h,{disabled:!1,renderKey:T,aliasToVersionMap:I,version:C,draftAliases:k,existingAliases:A,setDraftAliases:S})}),(0,u.FD)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",gap:Y.spacing.xs},""),children:[E&&(0,u.Y)(t.Alert,{componentId:"mlflow.edit-aliases-modal.exceeding-limit-alert",role:"alert",message:(0,u.Y)(p.A,{id:"rzIPYc",defaultMessage:"You are exceeding a limit of {limit} aliases assigned to the single model version",values:{limit:10}}),type:"error",closable:!1}),T.map((({alias:e,otherVersion:o})=>(0,u.Y)(t.Alert,{componentId:"mlflow.edit-aliases-modal.conflicted-alias-alert",role:"alert",message:(0,u.Y)(p.A,{id:"CUKIO0",defaultMessage:'The "{alias}" alias is also being used on version {otherVersion}. Adding it to this version will remove it from version {otherVersion}.',values:{otherVersion:null===o||void 0===o?void 0:o.version,alias:e}}),type:"info",closable:!1},e))),w&&(0,u.Y)(t.Alert,{componentId:"mlflow.edit-aliases-modal.error-alert",role:"alert",message:w,type:"error",closable:!1})]})]})]}),showEditAliasesModal:D}}},24507:function(e,o,n){n(31014),n(26785)},26785:function(e,o,n){n.d(o,{a:function(){return r}});n(31014);var s=n(16934),a=n(48443),i=n(48128),t=n(50111);function r({buttonProps:e,componentId:o,copyText:n,copyTooltip:r,isInsideInputGroup:l=!1,onCopy:d,tooltipProps:c}){const{actionIcon:p,copy:u,handleTooltipOpenChange:m,tooltipOpen:g,tooltipMessage:f}=(0,i.L)(n,r,d),v=(0,t.Y)(s.B,{"aria-label":f,componentId:null!==o&&void 0!==o?o:"codegen_web-shared_src_copy_copyactionbutton.tsx_17",icon:p,onClick:u,size:"small",...e}),h=(0,t.Y)(s.B,{"aria-label":f,componentId:null!==o&&void 0!==o?o:"codegen_web-shared_src_copy_copyactionbutton.tsx_17",onClick:u,...e,children:p});return(0,t.Y)(a.T,{componentId:o?`${o}-tooltip`:"codegen_web-shared_src_copy_copyactionbutton.tsx_17-tooltip",content:f,onOpenChange:m,open:g,...c,children:l?h:v})}},38235:function(e,o,n){n.d(o,{i:function(){return c}});var s=n(89555),a=(n(31014),n(16934)),i=n(68048),t=n(95451),r=n(56412),l=n(50111);var d={name:"bjn8wh",styles:"position:relative"};const c=({code:e})=>{const{theme:o}=(0,a.u)();return(0,l.FD)("div",{css:d,children:[(0,l.Y)(r.i,{css:(0,s.AH)({zIndex:1,position:"absolute",top:o.spacing.xs,right:o.spacing.xs},""),showLabel:!1,copyText:e,icon:(0,l.Y)(i.CopyIcon,{})}),(0,l.Y)(t.z7,{language:"python",showLineNumbers:!1,style:{padding:o.spacing.sm,color:o.colors.textPrimary,backgroundColor:o.colors.backgroundSecondary,whiteSpace:"pre-wrap"},wrapLongLines:!0,children:e})]})}},48128:function(e,o,n){n.d(o,{L:function(){return d}});var s=n(31014),a=n(96950),i=n(48443),t=n(68048),r=n(7450),l=n(50111);function d(e,o,n){const d=(0,r.tz)(),c=o||d.formatMessage({id:"hBAhI8",defaultMessage:"Copy"}),p=d.formatMessage({id:"g4hHzO",defaultMessage:"Copied"}),u=(0,a.useClipboard)(),m=(0,s.useRef)(),[g,f]=(0,s.useState)(!1),[v,h]=(0,s.useState)(!1);(0,s.useEffect)((()=>()=>{window.clearTimeout(m.current)}),[]);return{actionIcon:g?(0,l.Y)(i.C,{}):(0,l.Y)(t.CopyIcon,{}),tooltipMessage:g?p:c,copy:()=>{u.copy(e),window.clearTimeout(m.current),f(!0),null===n||void 0===n||n(),m.current=window.setTimeout((()=>{f(!1)}),3e3)},copied:g,ariaLabel:c,tooltipOpen:v||g,handleTooltipOpenChange:h}}},50211:function(e,o){o.A={'code[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"Monaco, Menlo, Ubuntu Mono, Consolas, source-code-pro, monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"Monaco, Menlo, Ubuntu Mono, Consolas, source-code-pro, monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",overflow:"auto",position:"relative",margin:"0.5em 0",padding:"1.25em 1em"},'code[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},':not(pre) > code[class*="language-"]':{whiteSpace:"normal",borderRadius:"0.2em",padding:"0.1em"},".language-css > code":{color:"#f5871f"},".language-sass > code":{color:"#f5871f"},".language-scss > code":{color:"#f5871f"},'[class*="language-"] .namespace':{Opacity:"0.7"},atrule:{color:"#7c4dff"},"attr-name":{color:"#39adb5"},"attr-value":{color:"#f6a434"},attribute:{color:"#f6a434"},boolean:{color:"#7c4dff"},builtin:{color:"#39adb5"},cdata:{color:"#39adb5"},char:{color:"#39adb5"},class:{color:"#39adb5"},"class-name":{color:"#6182b8"},comment:{color:"#8e908c"},constant:{color:"#7c4dff"},deleted:{color:"#e53935"},doctype:{color:"#aabfc9"},entity:{color:"#e53935"},function:{color:"#4271ae"},hexcode:{color:"#f5871f"},id:{color:"#7c4dff",fontWeight:"bold"},important:{color:"#7c4dff",fontWeight:"bold"},inserted:{color:"#39adb5"},keyword:{color:"#8959a8"},number:{color:"#f5871f"},operator:{color:"#3e999f"},prolog:{color:"#aabfc9"},property:{color:"#39adb5"},"pseudo-class":{color:"#f6a434"},"pseudo-element":{color:"#f6a434"},punctuation:{color:"rgb(77, 77, 76)"},regex:{color:"#6182b8"},selector:{color:"#e53935"},string:{color:"#3ba85f"},symbol:{color:"#7c4dff"},tag:{color:"#e53935"},unit:{color:"#f5871f"},url:{color:"#e53935"},variable:{color:"#c72d4c"}}},80532:function(e,o,n){n.r(o),n.d(o,{default:function(){return ke}});var s=n(89555),a=n(4877),i=n.n(a),t=n(10811),r=n(41261),l=n(82832);const d=async({queryKey:e})=>{var o;const[,{promptName:n}]=e,[s,a]=await Promise.all([l.M.getPromptDetails(n),l.M.getPromptVersions(n)]);return{prompt:s.registered_model,versions:null!==(o=a.model_versions)&&void 0!==o?o:[]}};var c=n(48624),p=n(84069),u=n(16934),m=n(68048),g=n(48443),f=n(88443),v=n(84565),h=n(31014),b=n(58481),y=n(70724),w=n(77020),M=n(50111);var Y=n(70618),A=n(9856),x=n(88464),k=n(76010),S=n(30922),C=n(91164);const V=({getValue:e,row:{original:o},table:{options:{meta:n}}})=>{const{showEditAliasesModal:s,aliasesByVersion:a,registeredPrompt:i}=n,t=a[o.version]||[];return i?(0,M.Y)(C.Y,{modelName:null===i||void 0===i?void 0:i.name,version:o.version,aliases:t,onAddEdit:()=>{null===s||void 0===s||s(o.version)}}):null},D=({isSelectedFirstToCompare:e,isSelectedSecondToCompare:o,onSelectFirst:n,onSelectSecond:a})=>{const{theme:i}=(0,u.u)(),t=(0,x.A)();return(0,M.Y)("div",{css:(0,s.AH)({width:i.general.buttonHeight,display:"flex",alignItems:"center",paddingRight:i.spacing.sm},""),children:(0,M.FD)("div",{css:(0,s.AH)({display:"flex",height:i.general.buttonInnerHeight+i.spacing.xs,gap:0,flex:1},""),children:[(0,M.Y)(g.T,{componentId:"mlflow.prompts.details.select_baseline.tooltip",content:(0,M.Y)(f.A,{id:"KV3BXl",defaultMessage:"Select as baseline version"}),delayDuration:0,side:"left",children:(0,M.Y)("button",{onClick:n,role:"radio","aria-checked":e,"aria-label":t.formatMessage({id:"KV3BXl",defaultMessage:"Select as baseline version"}),css:(0,s.AH)({flex:1,border:`1px solid ${e?i.colors.actionDefaultBorderFocus:i.colors.actionDefaultBorderDefault}`,borderRight:0,marginLeft:1,borderTopLeftRadius:i.borders.borderRadiusMd,borderBottomLeftRadius:i.borders.borderRadiusMd,backgroundColor:e?i.colors.actionDefaultBackgroundPress:i.colors.actionDefaultBackgroundDefault,cursor:"pointer","&:hover":{backgroundColor:i.colors.actionDefaultBackgroundHover}},"")})}),(0,M.Y)(g.T,{componentId:"mlflow.prompts.details.select_compared.tooltip",content:(0,M.Y)(f.A,{id:"9IN1I8",defaultMessage:"Select as compared version"}),delayDuration:0,side:"right",children:(0,M.Y)("button",{onClick:a,role:"radio","aria-checked":o,"aria-label":t.formatMessage({id:"9IN1I8",defaultMessage:"Select as compared version"}),css:(0,s.AH)({flex:1,border:`1px solid ${o?i.colors.actionDefaultBorderFocus:i.colors.actionDefaultBorderDefault}`,borderLeft:`1px solid ${e||o?i.colors.actionDefaultBorderFocus:i.colors.actionDefaultBorderDefault}`,borderTopRightRadius:i.borders.borderRadiusMd,borderBottomRightRadius:i.borders.borderRadiusMd,backgroundColor:o?i.colors.actionDefaultBackgroundPress:i.colors.actionDefaultBackgroundDefault,cursor:"pointer","&:hover":{backgroundColor:i.colors.actionDefaultBackgroundHover}},"")})})]})})};var T={name:"inxa61",styles:"flex:1;overflow:hidden"},I={name:"1h3rtzg",styles:"align-items:center"};const P=({promptVersions:e,onUpdateComparedVersion:o,isLoading:n,onUpdateSelectedVersion:a,comparedVersion:i,selectedVersion:t,mode:r,registeredPrompt:l,showEditAliasesModal:d,aliasesByVersion:c})=>{const p=(0,x.A)(),{theme:g}=(0,u.u)(),b=(0,h.useMemo)((()=>{const e=[{id:"version",header:p.formatMessage({id:"Vn+uJi",defaultMessage:"Version"}),accessorKey:"version",cell:S.q}];return r===v.Dp.TABLE&&(e.push({id:"creation_timestamp",header:p.formatMessage({id:"1tRtls",defaultMessage:"Registered at"}),accessorFn:({creation_timestamp:e})=>k.A.formatTimestamp(e,p)}),e.push({id:"commit_message",header:p.formatMessage({id:"ZaQ42C",defaultMessage:"Commit message"}),accessorKey:"description"}),e.push({id:"aliases",header:p.formatMessage({id:"M0zIfe",defaultMessage:"Aliases"}),accessorKey:"aliases",cell:V})),e}),[r,p]),y=(0,Y.N4)({data:null!==e&&void 0!==e?e:[],getRowId:e=>e.version,columns:b,getCoreRowModel:(0,A.HT)(),meta:{showEditAliasesModal:d,aliasesByVersion:c,registeredPrompt:l}});return(0,M.Y)("div",{css:T,children:(0,M.FD)(m.Table,{scrollable:!0,empty:n||0!==(null===e||void 0===e?void 0:e.length)?null:(0,M.Y)(m.Empty,{title:(0,M.Y)(f.A,{id:"9pJlQd",defaultMessage:"No prompt versions created"}),description:(0,M.Y)(f.A,{id:"7zgX/l",defaultMessage:'Use "Create prompt version" button in order to create a new prompt version'})}),"aria-label":"Prompt versions table",children:[(0,M.Y)(m.TableRow,{isHeader:!0,children:y.getLeafHeaders().map((e=>(0,M.Y)(m.TableHeader,{componentId:"mlflow.prompts.versions.table.header",children:(0,Y.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),n?(0,M.Y)(m.TableSkeletonRows,{table:y}):y.getRowModel().rows.map((e=>{const n=[v.Dp.PREVIEW].includes(r)&&t===e.original.version,l=[v.Dp.COMPARE].includes(r)&&t===e.original.version,d=[v.Dp.COMPARE].includes(r)&&i===e.original.version,c=r===v.Dp.PREVIEW;return(0,M.FD)(m.TableRow,{css:(0,s.AH)({height:g.general.heightBase,backgroundColor:n?g.colors.actionDefaultBackgroundPress:l||d?g.colors.actionDefaultBackgroundHover:"transparent",cursor:c?"pointer":"default"},""),onClick:()=>{r===v.Dp.PREVIEW&&a(e.original.version)},children:[e.getAllCells().map((e=>(0,M.Y)(m.TableCell,{css:I,children:(0,Y.Kv)(e.column.columnDef.cell,e.getContext())},e.id))),n&&(0,M.Y)("div",{css:(0,s.AH)({width:2*g.spacing.md,display:"flex",alignItems:"center",paddingRight:g.spacing.sm},""),children:(0,M.Y)(u.q,{})}),r===v.Dp.COMPARE&&(0,M.Y)(D,{onSelectFirst:()=>a(e.original.version),onSelectSecond:()=>o(e.original.version),isSelectedFirstToCompare:l,isSelectedSecondToCompare:d})]},e.id)}))]})})};var E=n(23381),F=n(9133);const R=(e,o)=>"setTableMode"===o.type?{...e,mode:v.Dp.TABLE}:"switchSides"===o.type?{...e,selectedVersion:e.comparedVersion,comparedVersion:e.selectedVersion}:"setPreviewMode"===o.type?{...e,mode:v.Dp.PREVIEW,selectedVersion:o.selectedVersion}:"setCompareMode"===o.type?{...e,mode:v.Dp.COMPARE,selectedVersion:o.selectedVersion,comparedVersion:o.comparedVersion}:"setSelectedVersion"===o.type?{...e,selectedVersion:o.selectedVersion}:"setComparedVersion"===o.type?{...e,comparedVersion:o.comparedVersion}:e;var B=n(77735),_=n(63515),L=n(63528);var H={name:"1pzk433",styles:"width:100px"};const z=({isLoadingRuns:e,runIds:o,runInfoMap:n})=>{const[s,a]=(0,h.useState)(!1),{theme:i}=(0,u.u)(),t=s?o.length:Math.min(3,o.length||0),r=o.length>3;return(0,M.FD)(M.FK,{children:[(0,M.Y)(u.T.Text,{bold:!0,children:(0,M.Y)(f.A,{id:"9ZHB3D",defaultMessage:"MLflow runs:"})}),(0,M.Y)("div",{children:e?(0,M.Y)(m.ParagraphSkeleton,{css:H}):(0,M.Y)(M.FK,{children:(0,M.FD)("div",{style:{display:"flex",flexWrap:"wrap",gap:i.spacing.sm},children:[o.slice(0,t).map(((e,o)=>{const s=n[e];if(!(0,F.isNil)(null===s||void 0===s?void 0:s.experimentId)&&null!==s&&void 0!==s&&s.runUuid&&null!==s&&void 0!==s&&s.runName){const{experimentId:e,runUuid:n,runName:a}=s;return(0,M.FD)(u.T.Text,{children:[(0,M.Y)(c.N_,{to:b.Ay.getRunPageRoute(e,n),children:a}),o<t-1&&","]})}return(0,M.Y)("span",{children:(null===s||void 0===s?void 0:s.runName)||(null===s||void 0===s?void 0:s.runUuid)})})),r&&(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.runs.show_more",size:"small",type:"link",onClick:()=>a(!s),children:s?(0,M.Y)(f.A,{id:"pVF+2s",defaultMessage:"Show less"}):(0,M.Y)(f.A,{id:"fh6RWb",defaultMessage:"{count} more...",values:{count:o.length-t}})})]})})})]})};var N=n(98590),O=n(98597);var W={name:"ti75j2",styles:"margin:0"};const K=({tags:e,onEditVersionMetadata:o})=>{const[n,s]=(0,h.useState)(!1),{theme:a}=(0,u.u)(),i=n?e.length:Math.min(3,e.length||0),t=e.length>3,r=!(0,F.isNil)(o),l=e.length>0?(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.version.edit_tags",size:"small",icon:(0,M.Y)(m.PencilIcon,{}),onClick:o}):(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.version.add_tags",size:"small",type:"link",onClick:o,children:(0,M.Y)(f.A,{id:"JGQ5B2",defaultMessage:"Add"})});return(0,M.FD)(M.FK,{children:[(0,M.Y)(u.T.Text,{bold:!0,children:(0,M.Y)(f.A,{id:"GgPNAZ",defaultMessage:"Metadata:"})}),(0,M.Y)("div",{children:(0,M.Y)(M.FK,{children:(0,M.FD)("div",{style:{display:"flex",flexWrap:"wrap",gap:a.spacing.xs},children:[e.slice(0,i).map((e=>(0,M.Y)(O.t,{css:W,tag:e},e.key))),r&&l,!r&&0===e.length&&(0,M.Y)(u.T.Hint,{children:"\u2014"}),t&&(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.version.tags.show_more",size:"small",type:"link",onClick:()=>s(!n),children:n?(0,M.Y)(f.A,{id:"pVF+2s",defaultMessage:"Show less"}):(0,M.Y)(f.A,{id:"fh6RWb",defaultMessage:"{count} more...",values:{count:e.length-i}})})]})})})]})};var U={name:"wjlmq0",styles:"max-width:none"};const j=({registeredPromptVersion:e,registeredPrompt:o,showEditAliasesModal:n,onEditVersion:a,showEditPromptVersionMetadataModal:i,aliasesByVersion:t,isBaseline:r})=>{var l;const{theme:d}=(0,u.u)(),c=(0,h.useMemo)((()=>{var o,n;const s=null===e||void 0===e||null===(o=e.tags)||void 0===o||null===(n=o.find((e=>e.key===v.xd)))||void 0===n?void 0:n.value;return s?s.split(",").map((e=>e.trim())):[]}),[e]),{isLoading:p,runInfoMap:m}=((e=[])=>{const o=(0,B.E)({queries:e.map((e=>({queryKey:["prompt_associated_runs",e],queryFn:async({queryKey:[,e]})=>{try{const o=await L.x.getRun({run_id:e});return(0,_.LJ)(o)}catch(o){return null}}})))}),n={};return o.forEach(((o,s)=>{var a,i;const t=e[s];n[t]=null===(a=o.data)||void 0===a||null===(i=a.run)||void 0===i?void 0:i.info})),{isLoading:e.length>0&&o.some((e=>e.isLoading)),runInfoMap:n}})(c||[]);if(!o||!e)return null;const g=(null===e||void 0===e||null===(l=e.tags)||void 0===l?void 0:l.filter((e=>(0,N.oD)(e.key))))||[],b=(0,M.Y)(f.A,{id:"loe2Ov",defaultMessage:"Version {version}",values:{version:e.version}}),y=i?()=>{i(e)}:void 0;return(0,M.FD)("div",{css:(0,s.AH)({display:"grid",gridTemplateColumns:"120px 1fr",gridAutoRows:`minmax(${d.typography.lineHeightLg}, auto)`,alignItems:"flex-start",rowGap:d.spacing.xs,columnGap:d.spacing.sm},""),children:[a&&(0,M.FD)(M.FK,{children:[(0,M.Y)(u.T.Text,{bold:!0,children:"Version:"}),(0,M.FD)(u.T.Text,{children:[(0,M.Y)(u.T.Link,{componentId:"mlflow.prompts.details.version.goto",onClick:()=>a(e),children:b})," ",r&&(0,M.Y)(f.A,{id:"FTx+Hi",defaultMessage:"(baseline)"})]})]}),(0,M.Y)(u.T.Text,{bold:!0,children:(0,M.Y)(f.A,{id:"wFvyI1",defaultMessage:"Registered at:"})}),(0,M.Y)(u.T.Text,{children:k.A.formatTimestamp(e.creation_timestamp)}),(0,M.Y)(u.T.Text,{bold:!0,children:(0,M.Y)(f.A,{id:"h3vlVA",defaultMessage:"Aliases:"})}),(0,M.Y)("div",{children:(0,M.Y)(C.Y,{css:U,modelName:o.name,version:e.version,aliases:t[e.version]||[],onAddEdit:()=>{null===n||void 0===n||n(e.version)}})}),e.description&&(0,M.FD)(M.FK,{children:[(0,M.Y)(u.T.Text,{bold:!0,children:(0,M.Y)(f.A,{id:"KGMbzq",defaultMessage:"Commit message:"})}),(0,M.Y)(u.T.Text,{children:e.description})]}),(0,M.Y)(K,{onEditVersionMetadata:y,tags:g}),(p||c.length>0)&&(0,M.Y)(z,{isLoadingRuns:p,runIds:c,runInfoMap:m})]})};var q=n(38235);const G=/\{\{\s*(.*?)\s*\}\}/g;var Z={name:"1eoy87d",styles:"display:flex;justify-content:space-between"},$={name:"1089mxj",styles:"white-space:pre-wrap"};const J=({promptVersion:e,onUpdatedContent:o,onDeletedVersion:n,aliasesByVersion:a,registeredPrompt:i,showEditAliasesModal:t,showEditPromptVersionMetadataModal:r})=>{const d=(0,h.useMemo)((()=>e?(0,v.dv)(e):""),[e]),{DeletePromptModal:c,openModal:p}=(({promptVersion:e,onSuccess:o})=>{const[n,s]=(0,h.useState)(!1),{mutate:a}=(0,w.n)({mutationFn:async({promptName:e,version:o})=>{await l.M.deleteRegisteredPromptVersion(e,o)}});return{DeletePromptModal:(0,M.Y)(g.d,{componentId:"mlflow.prompts.delete_version_modal",visible:n,onCancel:()=>s(!1),title:(0,M.Y)(f.A,{id:"WfY+Gj",defaultMessage:"Delete prompt version"}),okText:(0,M.Y)(f.A,{id:"orKoPo",defaultMessage:"Delete"}),okButtonProps:{danger:!0},onOk:async()=>{null!==e&&void 0!==e&&e.name?(a({promptName:e.name,version:e.version},{onSuccess:()=>{null===o||void 0===o||o(),s(!1)}}),s(!1)):s(!1)},cancelText:(0,M.Y)(f.A,{id:"VpFZR/",defaultMessage:"Cancel"}),children:(0,M.Y)(f.A,{id:"x2+7hZ",defaultMessage:"Are you sure you want to delete the prompt version?"})}),openModal:()=>s(!0)}})({promptVersion:e,onSuccess:()=>null===n||void 0===n?void 0:n()}),[b,y]=(0,h.useState)(!1),Y=(0,h.useMemo)((()=>{if(!d)return[];const e=[];let o;for(;null!==(o=G.exec(d));)e.push(o[1]);return e.some((e=>e.includes("{")||e.includes("}")))?null:(0,F.uniq)(e)}),[d]),{theme:A}=(X(e,Y),(0,u.u)());return(0,M.FD)("div",{css:(0,s.AH)({flex:1,padding:A.spacing.md,paddingTop:0,borderRadius:A.borders.borderRadiusSm,overflow:"auto",display:"flex",flexDirection:"column"},""),children:[(0,M.FD)("div",{css:Z,children:[(0,M.FD)(u.T.Title,{level:3,children:["Viewing version ",null===e||void 0===e?void 0:e.version]}),(0,M.FD)("div",{css:(0,s.AH)({display:"flex",gap:A.spacing.sm},""),children:[(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.delete_version",icon:(0,M.Y)(m.TrashIcon,{}),type:"primary",danger:!0,onClick:p,children:(0,M.Y)(f.A,{id:"H7JwOl",defaultMessage:"Delete version"})}),(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.preview.use",icon:(0,M.Y)(m.PlayIcon,{}),onClick:()=>y(!0),children:(0,M.Y)(f.A,{id:"8EK+SZ",defaultMessage:"Use"})})]})]}),(0,M.Y)(g.S,{shrinks:!1}),(0,M.Y)(j,{aliasesByVersion:a,registeredPrompt:i,registeredPromptVersion:e,showEditAliasesModal:t,showEditPromptVersionMetadataModal:r}),(0,M.Y)(g.S,{shrinks:!1}),(0,M.Y)("div",{css:(0,s.AH)({backgroundColor:A.colors.backgroundSecondary,padding:A.spacing.md,overflow:"auto"},""),children:(0,M.Y)(u.T.Text,{css:$,children:d||"Empty"})}),(0,M.Y)(g.d,{componentId:"mlflow.prompts.details.preview.usage_example_modal",title:(0,M.Y)(f.A,{id:"VrxfuC",defaultMessage:"Usage example"}),visible:b,onCancel:()=>y(!1),cancelText:(0,M.Y)(f.A,{id:"cmYzGP",defaultMessage:"Dismiss"}),children:(0,M.Y)(q.i,{code:X(e,Y)})}),c]})},X=(e,o)=>{let n=`from openai import OpenAI\nimport mlflow\nclient = OpenAI(api_key="<YOUR_API_KEY>")\n\n# Set MLflow tracking URI\nmlflow.set_tracking_uri("<YOUR_TRACKING_URI>")\n\n# Example of loading and using the prompt\nprompt = mlflow.genai.load_prompt("prompts:/${null===e||void 0===e?void 0:e.name}/${null===e||void 0===e?void 0:e.version}")`;return n+=null===o?'\n\n# Replace the variables with the actual values\nvariables = {\n   "key": "value",\n   ...\n}\n\nresponse = client.chat.completions.create(\n    messages=[{\n        "role": "user",\n        "content": prompt.format(**variables),\n    }],\n    model="gpt-4o-mini",\n)':`\nresponse = client.chat.completions.create(\n    messages=[{\n        "role": "user",\n        "content": prompt.format(${o.map((e=>`${e}="<${e}>"`)).join(", ")}),\n    }],\n    model="gpt-4o-mini",\n)`,n+="\n\nprint(response.choices[0].message.content)",n};var Q=n(21678);var ee={name:"1eoy87d",styles:"display:flex;justify-content:space-between"},oe={name:"zjik7",styles:"display:flex"},ne={name:"82a6rk",styles:"flex:1"},se={name:"82a6rk",styles:"flex:1"},ae={name:"ppz665",styles:"display:flex;flex:1;overflow:auto;align-items:flex-start"},ie={name:"1089mxj",styles:"white-space:pre-wrap"},te={name:"h55e3f",styles:"svg{rotate:90deg;}"},re={name:"1089mxj",styles:"white-space:pre-wrap"};const le=({baselineVersion:e,comparedVersion:o,onSwitchSides:n,onEditVersion:a,registeredPrompt:i,aliasesByVersion:t,showEditAliasesModal:r})=>{const{theme:l}=(0,u.u)(),d=(0,x.A)(),c=(0,h.useMemo)((()=>e?(0,v.dv)(e):""),[e]),p=(0,h.useMemo)((()=>o?(0,v.dv)(o):""),[o]),b=(0,h.useMemo)((()=>{var e;return null!==(e=(0,Q.b2)(null!==c&&void 0!==c?c:"",null!==p&&void 0!==p?p:""))&&void 0!==e?e:[]}),[c,p]),y=(0,h.useMemo)((()=>({addedBackground:l.isDarkMode?l.colors.green700:l.colors.green300,removedBackground:l.isDarkMode?l.colors.red700:l.colors.red300})),[l]);return(0,M.FD)("div",{css:(0,s.AH)({flex:1,padding:l.spacing.md,paddingTop:0,borderRadius:l.borders.borderRadiusSm,overflow:"hidden",display:"flex",flexDirection:"column"},""),children:[(0,M.Y)("div",{css:ee,children:(0,M.Y)(u.T.Title,{level:3,children:(0,M.Y)(f.A,{id:"B8RvlZ",defaultMessage:"Comparing version {baseline} with version {compared}",values:{baseline:null===e||void 0===e?void 0:e.version,compared:null===o||void 0===o?void 0:o.version}})})}),(0,M.Y)(g.S,{shrinks:!1}),(0,M.FD)("div",{css:oe,children:[(0,M.Y)("div",{css:ne,children:(0,M.Y)(j,{aliasesByVersion:t,onEditVersion:a,registeredPrompt:i,registeredPromptVersion:e,showEditAliasesModal:r,isBaseline:!0})}),(0,M.Y)("div",{css:(0,s.AH)({paddingLeft:l.spacing.sm,paddingRight:l.spacing.sm},""),children:(0,M.Y)("div",{css:(0,s.AH)({width:l.general.heightSm},"")})}),(0,M.Y)("div",{css:se,children:(0,M.Y)(j,{aliasesByVersion:t,onEditVersion:a,registeredPrompt:i,registeredPromptVersion:o,showEditAliasesModal:r})})]}),(0,M.Y)(g.S,{shrinks:!1}),(0,M.FD)("div",{css:ae,children:[(0,M.Y)("div",{css:(0,s.AH)({backgroundColor:l.colors.backgroundSecondary,padding:l.spacing.md,flex:1},""),children:(0,M.Y)(u.T.Text,{css:ie,children:c||"Empty"})}),(0,M.Y)("div",{css:(0,s.AH)({paddingLeft:l.spacing.sm,paddingRight:l.spacing.sm},""),children:(0,M.Y)(g.T,{componentId:"mlflow.prompts.details.switch_sides.tooltip",content:(0,M.Y)(f.A,{id:"Cbgg9B",defaultMessage:"Switch sides"}),side:"top",children:(0,M.Y)(u.B,{"aria-label":d.formatMessage({id:"Cbgg9B",defaultMessage:"Switch sides"}),componentId:"mlflow.prompts.details.switch_sides",icon:(0,M.Y)(m.ExpandMoreIcon,{css:te}),onClick:n})})}),(0,M.Y)("div",{css:(0,s.AH)({backgroundColor:l.colors.backgroundSecondary,padding:l.spacing.md,flex:1},""),children:(0,M.Y)(u.T.Text,{css:re,children:b.map(((e,o)=>(0,M.Y)("span",{css:(0,s.AH)({backgroundColor:e.added?y.addedBackground:e.removed?y.removedBackground:void 0,textDecoration:e.removed?"line-through":"none"},""),children:e.value},o)))})})]})]})};var de=n(20109),ce=n(62448),pe=n(72282),ue=n(60709);const me=({promptEntity:e,onTagsUpdated:o})=>{const n=(0,x.A)(),{theme:a}=(0,u.u)(),{EditTagsModal:i,showEditPromptTagsModal:t}=(0,ue.i)({onSuccess:o}),r=(null===e||void 0===e?void 0:e.tags.filter((e=>(0,N.oD)(e.key))))||[],l=r.length>0;return(0,M.FD)("div",{css:(0,s.AH)({paddingTop:a.spacing.xs,paddingBottom:a.spacing.xs,display:"flex",flexWrap:"wrap",alignItems:"center","> *":{marginRight:"0 !important"},gap:a.spacing.xs},""),children:[null===r||void 0===r?void 0:r.map((e=>(0,M.Y)(O.t,{tag:e},e.key))),(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.tags.edit",size:"small",icon:l?(0,M.Y)(m.PencilIcon,{}):void 0,onClick:()=>e&&t(e),"aria-label":n.formatMessage({id:"DHO5TT",defaultMessage:"Edit tags"}),children:l?void 0:(0,M.Y)(f.A,{id:"Nlm9bK",defaultMessage:"Add tags"}),type:"tertiary"}),i]})};var ge=n(82214);function fe({promptName:e}){return(0,M.Y)(ge.E,{statusCode:404,subMessage:`Prompt name '${e}' does not exist`,fallbackHomePageReactRoute:b.Ay.promptsPageRoute})}var ve=n(43683);var he=n(69708);const be=e=>(0,M.Y)(f.A,{id:"b0KTgh",defaultMessage:"Add/edit alias for prompt version {version}",values:{version:e}});var ye={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},we={name:"1rtaly3",styles:"flex:1;display:flex;overflow:hidden"},Me={name:"1t91kdm",styles:"flex:1;display:flex;flex-direction:column"};const Ye=()=>{var e,o,n;const{promptName:a}=(0,c.g)(),{theme:Y}=(0,u.u)(),A=(0,c.Zp)(),x=(0,t.wA)();i()(a,"Prompt name should be defined");const{data:k,refetch:S,isLoading:C,error:V}=(({promptName:e},o={})=>{var n;const s=(0,r.I)(["prompt_details",{promptName:e}],{queryFn:d,retry:!1,...o});return{data:s.data,error:null!==(n=s.error)&&void 0!==n?n:void 0,isLoading:s.isLoading,refetch:s.refetch}})({promptName:a}),{CreatePromptModal:D,openModal:T}=(0,y.z)({mode:y.v.CreatePromptVersion,registeredPrompt:null===k||void 0===k?void 0:k.prompt,latestVersion:(0,F.first)(null===k||void 0===k?void 0:k.versions),onSuccess:async({promptVersion:e})=>{await S(),e&&z({version:e})}}),{DeletePromptModal:I,openModal:B}=(({registeredPrompt:e,onSuccess:o})=>{const[n,s]=(0,h.useState)(!1),{mutate:a}=(0,w.n)({mutationFn:async({promptName:e})=>{await l.M.deleteRegisteredPrompt(e)}});return{DeletePromptModal:(0,M.Y)(g.d,{componentId:"mlflow.prompts.delete_modal",visible:n,onCancel:()=>s(!1),title:(0,M.Y)(f.A,{id:"p2po2x",defaultMessage:"Delete prompt"}),okText:(0,M.Y)(f.A,{id:"kgJSBI",defaultMessage:"Delete"}),okButtonProps:{danger:!0},onOk:async()=>{null!==e&&void 0!==e&&e.name?(a({promptName:e.name},{onSuccess:()=>{null===o||void 0===o||o(),s(!1)}}),s(!1)):s(!1)},cancelText:(0,M.Y)(f.A,{id:"ZlokCq",defaultMessage:"Cancel"}),children:(0,M.Y)(f.A,{id:"WVUF2N",defaultMessage:"Are you sure you want to delete the prompt?"})}),openModal:()=>s(!0)}})({registeredPrompt:null===k||void 0===k?void 0:k.prompt,onSuccess:()=>A(b.Ay.promptsPageRoute)}),{EditPromptVersionMetadataModal:_,showEditPromptVersionMetadataModal:L}=(({onSuccess:e})=>{const o=(0,w.n)({mutationFn:async({toAdd:e,toDelete:o,promptName:n,promptVersion:s})=>Promise.all([...e.map((({key:e,value:o})=>l.M.setRegisteredPromptVersionTag(n,s,e,o))),...o.map((({key:e})=>l.M.deleteRegisteredPromptVersionTag(n,s,e)))])}),{EditTagsModal:n,showEditTagsModal:s,isLoading:a}=(0,ve.Q)({title:(0,M.Y)(f.A,{id:"zxfWCx",defaultMessage:"Add/Edit Prompt Version Metadata"}),valueRequired:!0,saveTagsHandler:(n,s,a)=>{const{addedOrModifiedTags:i,deletedTags:t}=(0,N.Rf)(s,a);return new Promise(((s,a)=>{if(!n.name)return a();o.mutate({promptName:n.name,promptVersion:n.version,toAdd:i,toDelete:t},{onSuccess:()=>{s(),null===e||void 0===e||e()},onError:a})}))}});return{EditPromptVersionMetadataModal:n,showEditPromptVersionMetadataModal:(0,h.useCallback)((e=>{var o;return s({name:e.name,version:e.version,tags:null===(o=e.tags)||void 0===o?void 0:o.filter((e=>(0,N.oD)(e.key)))})}),[s]),isLoading:a}})({onSuccess:S}),{setCompareMode:H,setPreviewMode:z,setTableMode:O,switchSides:W,viewState:K,setSelectedVersion:U,setComparedVersion:j}=(e=>{const[o,n]=(0,h.useReducer)(R,{mode:v.Dp.PREVIEW}),s=(0,h.useCallback)((()=>{n({type:"setTableMode"})}),[]),a=(0,h.useCallback)((o=>{var s;const a=null===(s=null!==o&&void 0!==o?o:(0,F.first)(null===e||void 0===e?void 0:e.versions))||void 0===s?void 0:s.version;n({type:"setPreviewMode",selectedVersion:a})}),[e]),i=(0,h.useCallback)((e=>{n({type:"setSelectedVersion",selectedVersion:e})}),[]),t=(0,h.useCallback)((e=>{n({type:"setComparedVersion",comparedVersion:e})}),[]),r=(0,h.useCallback)((()=>{var o,s;const a=null===(o=(0,F.first)(null===e||void 0===e?void 0:e.versions))||void 0===o?void 0:o.version,i=null===e||void 0===e||null===(s=e.versions[1])||void 0===s?void 0:s.version;n({type:"setCompareMode",selectedVersion:i,comparedVersion:a})}),[e]),l=(0,h.useCallback)((()=>n({type:"switchSides"})),[]);return(0,F.first)(null===e||void 0===e?void 0:e.versions)&&o.mode===v.Dp.PREVIEW&&!o.selectedVersion&&a((0,F.first)(null===e||void 0===e?void 0:e.versions)),{viewState:o,setTableMode:s,setPreviewMode:a,setCompareMode:r,switchSides:l,setSelectedVersion:i,setComparedVersion:t}})(k),{mode:q}=K,G=!C&&!(null!==k&&void 0!==k&&k.versions.length),Z=!C&&!G&&[v.Dp.PREVIEW,v.Dp.COMPARE].includes(q),$=null===k||void 0===k?void 0:k.versions.find((({version:e})=>e===K.selectedVersion)),X=null===k||void 0===k?void 0:k.versions.find((({version:e})=>e===K.comparedVersion)),Q=(0,h.useMemo)((()=>{var e,o;const n={};return null===k||void 0===k||null===(e=k.prompt)||void 0===e||null===(o=e.aliases)||void 0===o||o.forEach((({alias:e,version:o})=>{n[o]||(n[o]=[]),n[o].push(e)})),n}),[k]),{EditAliasesModal:ee,showEditAliasesModal:oe}=(0,E.t)({aliases:null!==(e=null===k||void 0===k||null===(o=k.prompt)||void 0===o?void 0:o.aliases)&&void 0!==e?e:[],onSuccess:S,getTitle:be,onSave:async(e,o,n)=>{var s,a;return x((0,he.mq)(null!==(s=null===k||void 0===k||null===(a=k.prompt)||void 0===a?void 0:a.name)&&void 0!==s?s:"",e,o,n))},description:(0,M.Y)(f.A,{id:"4GPLHq",defaultMessage:"Aliases allow you to assign a mutable, named reference to a particular prompt version."})});if(V)return(0,M.Y)(fe,{promptName:a});const ne=(0,M.Y)(m.Breadcrumb,{children:(0,M.Y)(m.Breadcrumb.Item,{children:(0,M.Y)(c.N_,{to:b.Ay.promptsPageRoute,children:"Prompts"})})});return C?(0,M.Y)(p.m,{children:(0,M.Y)(Ye.Skeleton,{breadcrumbs:ne})}):(0,M.FD)(p.m,{css:ye,children:[(0,M.Y)(g.S,{shrinks:!1}),(0,M.Y)(m.Header,{breadcrumbs:ne,title:null===k||void 0===k||null===(n=k.prompt)||void 0===n?void 0:n.name,buttons:(0,M.FD)(M.FK,{children:[(0,M.FD)(m.DropdownMenu.Root,{children:[(0,M.Y)(m.DropdownMenu.Trigger,{asChild:!0,children:(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.actions",icon:(0,M.Y)(m.OverflowIcon,{}),"aria-label":"More actions"})}),(0,M.Y)(m.DropdownMenu.Content,{children:(0,M.Y)(m.DropdownMenu.Item,{componentId:"mlflow.prompts.details.actions.delete",onClick:B,children:(0,M.Y)(f.A,{id:"BwgPX0",defaultMessage:"Delete"})})})]}),(0,M.Y)(u.B,{componentId:"mlflow.prompts.details.create",type:"primary",onClick:T,children:(0,M.Y)(f.A,{id:"RJenO+",defaultMessage:"Create prompt version"})})]})}),(0,M.Y)(me,{onTagsUpdated:S,promptEntity:null===k||void 0===k?void 0:k.prompt}),(0,M.Y)(g.S,{shrinks:!1}),(0,M.FD)("div",{css:we,children:[(0,M.FD)("div",{css:(0,s.AH)({flex:Z?"0 0 320px":1,display:"flex",flexDirection:"column"},""),children:[(0,M.Y)("div",{css:(0,s.AH)({display:"flex",gap:Y.spacing.sm},""),children:(0,M.FD)(m.SegmentedControlGroup,{name:"mlflow.prompts.details.mode",componentId:"mlflow.prompts.details.mode",value:q,disabled:C,children:[(0,M.Y)(m.SegmentedControlButton,{value:v.Dp.PREVIEW,onClick:()=>z(),children:(0,M.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",gap:Y.spacing.xs},""),children:[(0,M.Y)(m.ZoomMarqueeSelection,{}),(0,M.Y)(f.A,{id:"wrNl6F",defaultMessage:"Preview"})]})}),(0,M.Y)(m.SegmentedControlButton,{value:v.Dp.TABLE,onClick:O,children:(0,M.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",gap:Y.spacing.xs},""),children:[(0,M.Y)(m.TableIcon,{})," ",(0,M.Y)(f.A,{id:"guBsqD",defaultMessage:"List"})]})}),(0,M.Y)(m.SegmentedControlButton,{disabled:Boolean(!(null!==k&&void 0!==k&&k.versions.length)||(null===k||void 0===k?void 0:k.versions.length)<2),value:v.Dp.COMPARE,onClick:H,children:(0,M.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",gap:Y.spacing.xs},""),children:[(0,M.Y)(m.ColumnsIcon,{})," ",(0,M.Y)(f.A,{id:"SI6n4L",defaultMessage:"Compare"})]})})]})}),(0,M.Y)(g.S,{shrinks:!1,size:"sm"}),(0,M.Y)(P,{isLoading:C,registeredPrompt:null===k||void 0===k?void 0:k.prompt,promptVersions:null===k||void 0===k?void 0:k.versions,selectedVersion:K.selectedVersion,comparedVersion:K.comparedVersion,showEditAliasesModal:oe,aliasesByVersion:Q,onUpdateSelectedVersion:U,onUpdateComparedVersion:j,mode:q})]}),Z&&(0,M.Y)("div",{css:Me,children:(0,M.FD)("div",{css:(0,s.AH)({borderLeft:`1px solid ${Y.colors.border}`,flex:1,overflow:"hidden",display:"flex"},""),children:[q===v.Dp.PREVIEW&&(0,M.Y)(J,{promptVersion:$,onUpdatedContent:S,onDeletedVersion:async()=>{await S().then((({data:e})=>{!(0,F.isEmpty)(null===e||void 0===e?void 0:e.versions)&&null!==e&&void 0!==e&&e.versions[0].version?U(null===e||void 0===e?void 0:e.versions[0].version):O()}))},aliasesByVersion:Q,showEditAliasesModal:oe,registeredPrompt:null===k||void 0===k?void 0:k.prompt,showEditPromptVersionMetadataModal:L}),q===v.Dp.COMPARE&&(0,M.Y)(le,{baselineVersion:$,comparedVersion:X,onSwitchSides:W,onEditVersion:z,showEditAliasesModal:oe,registeredPrompt:null===k||void 0===k?void 0:k.prompt,aliasesByVersion:Q})]})})]}),(0,M.Y)(g.S,{shrinks:!1}),ee,D,I,_]})};var Ae={name:"1gt3dvv",styles:"flex:0 0 320px"},xe={name:"82a6rk",styles:"flex:1"};Ye.Skeleton=function({breadcrumbs:e}){const{theme:o}=(0,u.u)();return(0,M.FD)(M.FK,{children:[(0,M.Y)(g.S,{shrinks:!1}),(0,M.Y)(m.Header,{breadcrumbs:e,title:(0,M.Y)(m.GenericSkeleton,{css:(0,s.AH)({height:o.general.heightBase,width:200},"")}),buttons:(0,M.Y)(m.GenericSkeleton,{css:(0,s.AH)({height:o.general.heightBase,width:120},"")})}),(0,M.Y)(g.S,{shrinks:!1}),(0,M.Y)(m.TableSkeleton,{lines:4}),(0,M.Y)(g.S,{shrinks:!1}),(0,M.FD)("div",{css:(0,s.AH)({display:"flex",gap:o.spacing.lg},""),children:[(0,M.Y)("div",{css:Ae,children:(0,M.Y)(m.TableSkeleton,{lines:6})}),(0,M.Y)("div",{css:xe,children:(0,M.Y)(m.TableSkeleton,{lines:4})})]})]})};var ke=(0,de.X)(ce.A.mlflowServices.EXPERIMENTS,Ye,void 0,pe.u)},86020:function(e,o,n){n.d(o,{Z:function(){return r}});var s=n(89555),a=n(16934),i=n(68048),t=n(50111);const r=({value:e,closable:o,onClose:n,className:r,compact:l=!1})=>{const{theme:d}=(0,a.u)();return(0,t.Y)(i.Tag,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversionaliastag.tsx_23",css:(0,s.AH)({fontWeight:d.typography.typographyBoldFontWeight,marginRight:d.spacing.xs},""),className:r,closable:o,onClose:n,title:e,children:(0,t.FD)("span",{css:(0,s.AH)({display:"block",whiteSpace:"nowrap",maxWidth:l?160:300,textOverflow:"ellipsis",overflow:"hidden"},""),children:["@","\xa0",e]})})}},91164:function(e,o,n){n.d(o,{Y:function(){return d}});var s=n(89555),a=n(16934),i=n(68048),t=n(86020),r=n(88443),l=n(50111);const d=({aliases:e=[],onAddEdit:o,className:n})=>{const{theme:d}=(0,a.u)();return(0,l.Y)("div",{css:(0,s.AH)({maxWidth:300,display:"flex",flexWrap:"wrap",alignItems:"flex-start","> *":{marginRight:"0 !important"},rowGap:d.spacing.xs/2,columnGap:d.spacing.xs},""),className:n,children:e.length<1?(0,l.Y)(a.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_30",size:"small",type:"link",onClick:o,children:(0,l.Y)(r.A,{id:"pU6cxH",defaultMessage:"Add"})}):(0,l.FD)(l.FK,{children:[e.map((e=>(0,l.Y)(t.Z,{value:e,css:(0,s.AH)({marginTop:d.spacing.xs/2},"")},e))),(0,l.Y)(a.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_41",size:"small",icon:(0,l.Y)(i.PencilIcon,{}),onClick:o})]})})}},95451:function(e,o,n){n.d(o,{z7:function(){return A},VE:function(){return w}});var s=n(17729),a=n(67122),i=n(82328),t=n(67699),r=n(42346),l=n(74702),d=n(34939),c=n(72670),p=n(2844),u=n(50211),m=n(9133),g=n(50111),f=(n(31014),n(9650)),v=n(68048),h=n(16934);var b={name:"1739oy8",styles:"z-index:1"};function y({tooltipMessage:e,...o}){const n=b;return(0,g.Y)(v.LegacyTooltip,{title:e,children:(0,g.Y)(h.B,{componentId:"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33",...o,css:n})})}function w({copyText:e,onClick:o,...n}){const{actionIcon:s,tooltipMessage:a,copy:i}=(0,f.Ld)(e);return(0,g.Y)(y,{tooltipMessage:a,icon:s,onClick:e=>{i(),null===o||void 0===o||o(e)},...n})}s.A.registerLanguage("sql",c.A),s.A.registerLanguage("java",i.A),s.A.registerLanguage("python",l.A),s.A.registerLanguage("go",a.A),s.A.registerLanguage("javascript",t.A),s.A.registerLanguage("yaml",d.A),s.A.registerLanguage("json",r.A);const M="24px",Y={light:u.A,duotoneDark:p.A};function A({theme:e="light",language:o,actions:n,style:a,children:i,showLineNumbers:t,lineNumberStyle:r,wrapLongLines:l,wrapLines:d,PreTag:c}){const p={border:"none",borderRadius:0,margin:0,padding:M,...a};return(0,g.Y)(s.A,{showLineNumbers:t,lineNumberStyle:r,language:o,style:Y[e],customStyle:p,codeTagProps:{style:(0,m.pick)(a,"backgroundColor")},wrapLongLines:l,wrapLines:d,PreTag:c,children:i})}}}]);
//# sourceMappingURL=532.94a46a6b.chunk.js.map